(this.webpackJsonpvegetable=this.webpackJsonpvegetable||[]).push([[0],{653:function(e,t,a){},796:function(e,t,a){},961:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),i=a.n(c),s=(a(653),a(4)),o=a(17),l=a.n(o),j=a(32),d=a(1080),u=a(1079),b=a(66),O=a.n(b),x={api:"https://server.everydayfreshfood.com/api/",defaultEmail:"everydayfreshfood007@gmail.com",currencySymbol:"\xa3",currencyCode:"GBP",colorOne:"#f5881f",colorTwo:"#AE9EFD",vans:["Van#1","Van#2","Van#3","Van#4","Van#5","Van#6","Van#7","Van#8","Van#9","Van#10"],expenses:["Salaries","Office Rent","Electricity","Water","Gas","Food","Drinks","Telephone","Internet","Postage","Printing","Stationery"],getDaysBetweenDates:function(e,t){for(var a=e.clone(),n=[];a.isSameOrBefore(t);)n.push(a.format("YYYY-MM-DD")),a.add(1,"days");return n},uniqueValuesFromArray:function(e,t,a){return a.indexOf(e)===t},discounts:[{label:"0%",value:0},{label:"5%",value:.05},{label:"10%",value:.1},{label:"15%",value:.15}],weeks:[{label:"Older than 1 Week",value:"-1 week"},{label:"Older than 2 Weeks",value:"-2 weeks"},{label:"Older than 3 Weeks",value:"-3 weeks"},{label:"Older than 4 Weeks",value:"-4 weeks"},{label:"Older than 5 Weeks",value:"-5 weeks"}],filterAmounts:[{label:"Greater than 100",value:100},{label:"Greater than 200",value:200},{label:"Greater than 300",value:300},{label:"Greater than 500",value:500},{label:"Greater than 700",value:700}],boxTypes:["Full Box","Half Box","Loose Item"],payments:["Paid","Unpaid"],status:["Progress","Completed","Canceled"],tax:20,adminRole:"admin",superAdminRole:"superadmin",validateEmail:function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},filter:function(e,t){for(var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],r=0;r<e.length;r++)a?e[r].name===t.name&&e[r].van===t.van&&e[r].type===t.type&&n.push(e[r]):e[r].name===t.name&&e[r].van===t.van&&n.push(e[r]);return n},sort:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return e.sort((function(e,a){return e[t]>a[t]?1:e[t]<a[t]?-1:0}))}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!e||e.length<=0?t+"Password cannot be empty.":e.length<6?t+"Password must be have 6 characters.":""},p={login:function(e){var t=e.username,a=e.password,n=new Request(x.api+"adminlogin",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:new Headers({"Content-Type":"application/json"})});return fetch(n).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){localStorage.setItem("auth",JSON.stringify(e))})).catch((function(e){throw console.log(e),new Error("Invalid credentials.")}))},logout:function(){if(localStorage.getItem("auth")){var e=new Request(x.api+"logout",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("auth")).token})});return fetch(e).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(){return localStorage.removeItem("auth"),Promise.resolve()})).catch((function(){}))}return Promise.resolve()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("auth"),Promise.reject()):Promise.resolve()},checkAuth:function(){return localStorage.getItem("auth")?Promise.resolve():Promise.reject()},getPermissions:function(){var e=JSON.parse(localStorage.getItem("auth"));return e?Promise.resolve(e.role):Promise.reject()},getIdentity:function(){var e={id:JSON.stringify(Date()),fullName:"Admin"};return localStorage.getItem("auth")&&(e=JSON.parse(localStorage.getItem("auth"))),Promise.resolve({user_id:e.user_id,id:e.token,fullName:e.name,avatar:"https://randomuser.me/api/portraits/men/1.jpg"})}},m=a(70),f=a(144),g=a(117),y=a(312),v=a.n(y),A=x.api,S=f.a.fetchJson,w={getList:function(){var e=Object(j.a)(l.a.mark((function e(t,a){var n,r,c,i,s,o,j,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.pagination,r=n.page,c=n.perPage,i=a.sort,s=i.field,o=i.order,j={sort:JSON.stringify([s,o]),range:JSON.stringify([(r-1)*c,r*c-1]),filter:JSON.stringify(a.filter)},d="".concat(A).concat(t,"?").concat(Object(g.stringify)(j)),e.abrupt("return",v()(d).then((function(e){var t=e.body,a=e.headers;return{data:t,total:a["content-language"]?parseInt(a["content-language"]):t.length}})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getOne:function(e,t){var a="".concat(A).concat(e,"/").concat(t.id);return S(a).then((function(e){return{data:e.json}}))},getMany:function(e,t){var a={filter:JSON.stringify({id:t.ids})},n="".concat(A).concat(e,"?").concat(Object(g.stringify)(a));return S(n).then((function(e){return{data:e.json}}))},getManyReference:function(e,t){var a=t.pagination,n=a.page,r=a.perPage,c=t.sort,i=c.field,o=c.order,l={sort:JSON.stringify([i,o]),range:JSON.stringify([(n-1)*r,n*r-1]),filter:JSON.stringify(Object(s.a)(Object(s.a)({},t.filter),{},Object(m.a)({},t.target,t.id)))},j="".concat(A).concat(e,"?").concat(Object(g.stringify)(l));return S(j).then((function(e){var t=e.headers;return{data:e.json,total:parseInt(t.get("content-range").split("/").pop(),10)}}))},updateMany:function(e,t){alert("updateMany");var a={filter:JSON.stringify({id:t.ids})};return S("".concat(A).concat(e,"?").concat(Object(g.stringify)(a)),{method:"PUT",body:JSON.stringify(t.data)}).then((function(e){return{data:e.json}}))},delete:function(e,t){return S("".concat(A).concat(e,"/").concat(t.id),{method:"DELETE"}).then((function(e){return{data:e.json}}))},deleteMany:function(e,t){var a={filter:JSON.stringify({id:t.ids})},n="".concat(A).concat(e,"?").concat(Object(g.stringify)(a));return S(n,{method:"DELETE"}).then((function(e){return{data:e.json}}))},getListSimple:function(){var e=Object(j.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(A).concat(t,"?").concat(Object(g.stringify)(a)),e.abrupt("return",S(n).then((function(e){return{data:e.json}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),create:function(e,t){return v()("".concat(A).concat(e),{method:"POST",body:t.data}).then((function(e){return{data:Object(s.a)(Object(s.a)({},t.data),{},{id:e.id})}}))},update:function(e,t){var a="".concat(A).concat(e,"/").concat(t.id);return v()(a,{method:"PUT",body:t.data}).then((function(e){return{data:e.body}}))}},_=Object(s.a)(Object(s.a)({},w),{},{update:function(e,t){if(t.data.image&&"items"===e){var a=t.data.image.rawFile?t.data.image:null;return a?k(a).then((function(a){return w.update(e,Object(s.a)(Object(s.a)({},t),{},{data:Object(s.a)(Object(s.a)({},t.data),{},{image:a})}))})):w.update(e,Object(s.a)(Object(s.a)({},t),{},{data:Object(s.a)({},t.data)}))}return w.update(e,t)},create:function(e,t){if(t.data.image&&"items"===e){var a=t.data.image;return k(a).then((function(a){return w.create(e,Object(s.a)(Object(s.a)({},t),{},{data:Object(s.a)(Object(s.a)({},t.data),{},{image:a})}))}))}return w.create(e,t)}}),k=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){return t(n.result)},n.onerror=a,n.readAsDataURL(e.rawFile)}))},P=a(1096),C=a(1),I=function(){return Object(C.jsx)(P.a,{})},T=a(39),F=a(10),D=a(1031),N=a(969),B=a(317),M=a(101),R=a(1033),W=a(191),z=a.n(W),E=a(200),L=a(80),Q=a(609),U=a(385),Y=a(386),q=a(236),G=a(1034),J=a(1035),Z=function(){var e=Object(E.a)(),t=Object(L.a)(),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";e(t,a)},r=n.useState({password:"",confirmPassword:"",showPassword:!1}),c=Object(F.a)(r,2),i=c[0],o=c[1],d=function(e){return function(t){o(Object(s.a)(Object(s.a)({},i),{},Object(m.a)({},e,t.target.value)))}},u=function(){o(Object(s.a)(Object(s.a)({},i),{},{showPassword:!i.showPassword}))},b=function(e){e.preventDefault()};return Object(C.jsxs)(D.a,{style:{marginTop:20},children:[Object(C.jsx)(M.b,{title:"Manage Password"}),Object(C.jsx)(N.a,{children:Object(C.jsx)(Q.a,{children:Object(C.jsxs)(R.a,{container:!0,children:[Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)(U.a,{autoFocus:!0,label:"New Password",variant:"outlined",size:"small",type:i.showPassword?"text":"password",value:i.password,required:!0,onChange:d("password"),InputProps:{endAdornment:Object(C.jsx)(Y.a,{children:Object(C.jsx)(q.a,{onClick:u,onMouseDown:b,children:i.showPassword?Object(C.jsx)(G.a,{}):Object(C.jsx)(J.a,{})})})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)(U.a,{label:"Confirm New Password",variant:"outlined",size:"small",type:i.showPassword?"text":"password",value:i.confirmPassword,required:!0,onChange:d("confirmPassword"),InputProps:{endAdornment:Object(C.jsx)(Y.a,{children:Object(C.jsx)(q.a,{onClick:u,onMouseDown:b,children:i.showPassword?Object(C.jsx)(G.a,{}):Object(C.jsx)(J.a,{})})})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(z.a,{}),variant:"contained",color:"primary",onClick:function(){t.getIdentity().then(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=i.password&&""!=i.confirmPassword){e.next=3;break}return a("Please fill all fields."),e.abrupt("return");case 3:if(!h(i.password,"New ")){e.next=6;break}return a(h(i.password,"New ")),e.abrupt("return");case 6:if(!h(i.confirmPassword,"Confirm New ")){e.next=9;break}return a(h(i.confirmPassword,"Confirm New ")),e.abrupt("return");case 9:return n=x.api+"change_password",e.next=12,O.a.post(n,Object(s.a)(Object(s.a)({},i),{},{id:t.user_id})).then((function(e){a("Password changed successfully.","success"),o({password:"",confirmPassword:"",showPassword:!1})})).catch((function(e){a("Internal server error.")}));case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Change Password"})})]})})})]})},V=[Object(C.jsx)(T.b,{exact:!0,path:"/passwords",render:function(){return Object(C.jsx)(Z,{})}})],H=a(606),X=a(1090),K=a(281),$=a(382),ee=a(601),te=a(51),ae=a(104),ne=a.p+"static/media/logo.afe8c721.png",re=Object(ae.a)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}}),ce=Object(n.forwardRef)((function(e,t){return Object(C.jsx)(K.a,{style:{paddingLeft:10},ref:t,to:"/passwords",primaryText:"Manage Password",leftIcon:Object(C.jsx)(z.a,{}),onClick:e.onClick,sidebarIsOpen:!0})})),ie=function(e){return Object(C.jsx)($.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(ce,{})}))},se=function(e){var t=re();return Object(C.jsxs)(ee.a,Object(s.a)(Object(s.a)({},e),{},{elevation:1,userMenu:Object(C.jsx)(ie,{}),children:[Object(C.jsx)(te.a,{variant:"h6",color:"inherit",className:t.title,id:"react-admin-title"}),Object(C.jsx)("img",{src:ne,style:{width:55}}),Object(C.jsx)("span",{className:t.spacer})]}))},oe=a(1067),le=a(13),je=a(318),de=a(971),ue=a(387),be=a(1038),Oe=a(1032),xe=a(172),he=a.n(xe),pe=a(69),me=Object(ae.a)((function(e){return{icon:{minWidth:e.spacing(5)},sidebarIsOpen:{"& a":{paddingLeft:e.spacing(4),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}},sidebarIsClosed:{"& a":{paddingLeft:e.spacing(2),transition:"padding-left 195ms cubic-bezier(0.4, 0, 0.6, 1) 0ms"}}}})),fe=function(e){var t=e.handleToggle,a=e.isOpen,r=e.name,c=e.icon,i=e.children,s=e.dense,o=Object(pe.a)(),l=me(),j=Object(le.f)((function(e){return e.admin.ui.sidebarOpen})),d=Object(C.jsxs)(je.a,{dense:s,button:!0,onClick:t,children:[Object(C.jsx)(de.a,{className:l.icon,children:a?Object(C.jsx)(he.a,{}):c}),Object(C.jsx)(te.a,{variant:"inherit",color:"textSecondary",children:o(r)})]});return Object(C.jsxs)(n.Fragment,{children:[j||a?d:Object(C.jsx)(ue.a,{title:o(r),placement:"right",children:d}),Object(C.jsx)(be.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(C.jsx)(Oe.a,{dense:s,component:"div",disablePadding:!0,className:j?l.sidebarIsOpen:l.sidebarIsClosed,children:i})})]})},ge=a(41),ye=a(42),ve=a(43),Ae=a(44),Se=a(604),we=a(1044),_e=a(1095),ke=a(1047),Pe=a(597),Ce=a(1052),Ie=a(233),Te=a(535),Fe=a(536),De=a(1053),Ne=a(1084),Be=a(1055),Me=a(543),Re=a(613),We=a(981),ze=a(1087),Ee=a(1083),Le=a(533),Qe=a(1102),Ue=a(1092),Ye=a(523),qe=a.n(Ye),Ge=a(9),Je=a(90),Ze=a(107),Ve=a.n(Ze),He=a(8),Xe=a.n(He),Ke=a(96),$e=a(1039),et=a(1040),tt=a(524),at=a.n(tt),nt=a(974),rt=a(976),ct=a(977),it=a(979),st=a(978),ot=a(54),lt=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){var e;Object(ge.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showDialog:!1},e.handleClick=function(){e.setState({showDialog:!0})},e.handleCloseClick=function(){e.setState({showDialog:!1})},e.handleDelete=function(t){t.preventDefault(),e.setState({showDialog:!1});var a=e.props,n=a.dispatchCrudDelete,r=a.startUndoable,c=a.resource,i=a.record;a.undoable?r(n(c,i.id,i)):n(c,i.id,i)},e}return Object(ye.a)(a,[{key:"render",value:function(){var e=this.state.showDialog,t=this.props,a=t.label,r=void 0===a?"ra.action.delete":a,c=t.classes,i=void 0===c?{}:c,s=t.className,o=t.disableLable;return Object(C.jsxs)(n.Fragment,{children:[Object(C.jsx)(ot.a,{onClick:this.handleClick,label:o?"":r,className:Xe()("ra-delete-button",i.deleteButton,s),children:Object(C.jsx)(Ve.a,{})},"button"),Object(C.jsx)(nt.a,{fullWidth:!0,open:e,onClose:this.handleCloseClick,"aria-label":"Are you sure?",children:Object(C.jsxs)("form",{action:"/",method:"POST",onSubmit:this.handleDelete,children:[Object(C.jsx)(rt.a,{children:"Confirmation"}),Object(C.jsx)(ct.a,{children:Object(C.jsx)(st.a,{children:"Are you sure you want to delete?"})}),Object(C.jsxs)(it.a,{children:[Object(C.jsx)(ot.a,{type:"submit",label:"ra.action.delete",className:Xe()("ra-delete-button",i.deleteButton,s),children:Object(C.jsx)(Ve.a,{})},"button"),Object(C.jsx)(ot.a,{label:"ra.action.cancel",onClick:this.handleCloseClick,children:Object(C.jsx)(at.a,{})})]})]})})]})}}]),a}(n.Component);lt.defaultProps={redirect:"list",undoable:!0};var jt=qe()(Object(le.c)(null,{startUndoable:Ke.h,dispatchCrudDelete:$e.c}),et.a,Object(Ge.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(Je.fade)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}})))(lt),dt=a(545),ut=a.n(dt),bt=a(50),Ot=a.n(bt),xt=a(52),ht=a.n(xt),pt=a(600),mt=function(e){return Object(C.jsx)(pt.a,Object(s.a)({rowsPerPageOptions:[5,10,25,50,100,200,300,400,500]},e))},ft=function(e){var t=e.record;return Object(C.jsxs)("span",{children:["Parties ",t?" - ".concat(t.name):""]})},gt=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Party"}))}))},yt=function(e){return Object(C.jsx)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(ke.a,{label:"Search Paty Name",source:"name",alwaysOn:!0,variant:"outlined",fullWidth:!0})}))},vt=function(e){var t=e.record;return Object(C.jsx)(jt,{dispatchCrudDelete:!1,startUndoable:!1,resource:"parties",record:t,undoable:!1,disableLable:!0})},At=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsxs)(Pe.a,{children:[Object(C.jsx)(Ce.a,{source:"avatar",className:"img-round img-50",title:"Party image",label:"Avatar"}),Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(Te.a,{source:"email"}),Object(C.jsx)(Ie.a,{source:"business_name"}),Object(C.jsx)(Ie.a,{source:"address"}),Object(C.jsx)(Ie.a,{source:"contact_number"}),Object(C.jsx)(Fe.a,{source:"active_boolean",label:"Active Party"}),Object(C.jsx)(De.a,{label:""}),Object(C.jsx)(vt,{})]})}}]),a}(n.Component),St=function(e){var t;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{style:{marginRight:10},children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{marginTop:10,marginBottom:10,float:"right"},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},pageStyle:"padding:20px",content:function(){return t}}),Object(C.jsx)(At,Object(s.a)({ref:function(e){return t=e}},e))]})})},wt={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({filters:Object(C.jsx)(yt,{})},e),{},{bulkActionButtons:!1,sort:{field:"id",order:"desc"},pagination:Object(C.jsx)(mt,{}),children:Object(C.jsx)(St,Object(s.a)({},e))}))},show:function(e){return Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},e),{},{title:Object(C.jsx)(ft,{}),children:Object(C.jsxs)(Me.a,{children:[Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(Te.a,{source:"email"}),Object(C.jsx)(Ie.a,{source:"business_name"}),Object(C.jsx)(Ie.a,{source:"address"}),Object(C.jsx)(Ie.a,{source:"contact_number"})]})}))},create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Party addedd successfully."),n("/parties"),a()},onFailure:function(e){t(e.body,"error")},children:Object(C.jsxs)(Ee.a,{children:[Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,variant:"outlined",validate:Object(Le.b)(),value:"Abdullah"}),Object(C.jsx)(ke.a,{source:"email",fullWidth:!0,variant:"outlined",validate:Object(Le.b)(),type:"email"}),Object(C.jsx)(ke.a,{source:"password",fullWidth:!0,variant:"outlined",validate:Object(Le.b)(),type:"password"}),Object(C.jsx)(ke.a,{label:"Business Name",source:"business_name",fullWidth:!0,variant:"outlined",validate:Object(Le.b)()}),Object(C.jsx)(ke.a,{source:"address",fullWidth:!0,variant:"outlined",validate:Object(Le.b)(),multiline:!0,rows:2}),Object(C.jsx)(ke.a,{label:"Contact Number",source:"contact_number",fullWidth:!0,variant:"outlined",validate:Object(Le.b)()})]})}))},edit:function(e){var t=Object(E.a)(),a=Object(Re.a)();Object(We.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{title:Object(C.jsx)(ft,{}),onFailure:function(e){t(e.body,"error"),a()},undoable:!1,children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(gt,{}),children:[Object(C.jsx)(ke.a,{label:"Business Name",source:"business_name",fullWidth:!0,variant:"outlined",validate:Object(Le.b)()}),Object(C.jsx)(ke.a,{source:"address",fullWidth:!0,variant:"outlined",validate:Object(Le.b)(),multiline:!0,rows:2}),Object(C.jsx)(ke.a,{label:"Contact Number",source:"contact_number",fullWidth:!0,variant:"outlined",validate:Object(Le.b)()}),Object(C.jsx)(Qe.a,{source:"active",label:"Active Party",choices:[{id:"yes",name:"Yes"},{id:"no",name:"No"}]})]})}))},icon:ut.a,name:"parties"},_t=a(605),kt=a(1094),Pt=a(1059),Ct=a(1085),It=a(553),Tt=a.n(It),Ft=function(e){var t=e.record;return Object(C.jsxs)("span",{children:["Item ",t?" - ".concat(t.name):""]})},Dt=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Item"}))}))},Nt=function(e){return Object(C.jsx)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(ke.a,{label:"Search Item Name",source:"name",alwaysOn:!0,variant:"outlined",fullWidth:!0})}))},Bt={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Nt,{}),pagination:Object(C.jsx)(mt,{}),children:Object(C.jsxs)(Pe.a,{rowClick:"show",children:[Object(C.jsx)(Ce.a,{source:"r_image",className:"img-round img-50",title:"Item image",label:"Image"}),Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(_t.a,{source:"category_id",reference:"categories",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"added"}),Object(C.jsx)(Fe.a,{source:"tax_boolean",label:"20% VAT"}),Object(C.jsx)(Fe.a,{source:"visible_boolean",label:"Visible On App"}),Object(C.jsx)(De.a,{})]})}))},create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Item added successfully."),n("/items"),a()},onFailure:function(e){t(e.body,"error")},children:Object(C.jsxs)(Ee.a,{children:[Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,placeholder:"Potato",autoFocus:!0,variant:"outlined",validate:[Object(Le.b)()]}),Object(C.jsx)(kt.a,{source:"category_id",reference:"categories",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",children:Object(C.jsx)(Pt.a,{optionText:"name"})}),Object(C.jsx)(Qe.a,{source:"tax",label:"20% VAT",choices:[{id:"yes",name:"Yes"},{id:"no",name:"No"}]}),Object(C.jsx)(Qe.a,{source:"visible",label:"Visible on App",choices:[{id:"yes",name:"Yes"},{id:"no",name:"No"}]}),Object(C.jsx)(Ct.a,{source:"image",accept:"image/png, image/jpg, image/jpeg",maxSize:5e6,children:Object(C.jsx)(Ce.a,{source:"image"})})]})}))},show:function(e){return Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},e),{},{title:Object(C.jsx)(Ft,{}),children:Object(C.jsxs)(Me.a,{children:[Object(C.jsx)(Ie.a,{source:"id"}),Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(_t.a,{source:"category_id",reference:"categories",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"added"}),Object(C.jsx)(Ce.a,{source:"image",className:"img-round",alt:"item image"})]})}))},edit:function(e){var t=Object(Re.a)(),a=Object(E.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{undoable:!1,title:Object(C.jsx)(Ft,{}),onFailure:function(e){a(e.body,"error"),t()},children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(Dt,{}),children:[Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined"}),Object(C.jsx)(kt.a,{source:"category_id",reference:"categories",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",children:Object(C.jsx)(Pt.a,{optionText:"name"})}),Object(C.jsx)(Qe.a,{source:"tax",label:"20% VAT",choices:[{id:"yes",name:"Yes"},{id:"no",name:"No"}]}),Object(C.jsx)(Qe.a,{source:"visible",label:"Visible on App",choices:[{id:"yes",name:"Yes"},{id:"no",name:"No"}]}),Object(C.jsx)(Ct.a,{source:"image",accept:"image/png, image/jpg, image/jpeg",maxSize:5e6,children:Object(C.jsx)(Ce.a,{source:"image"})})]})}))},name:"items",icon:Tt.a},Mt=a(1082),Rt=a(554),Wt=a.n(Rt),zt=function(e){var t=e.record;return Object(C.jsxs)("span",{children:["Category ",t?" - ".concat(t.name):""]})},Et=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Category"}))}))},Lt=function(e){return Object(C.jsx)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(ke.a,{label:"Search Category Name",source:"name",alwaysOn:!0,variant:"outlined",fullWidth:!0})}))},Qt={create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Catgeory addedd successfully."),n("/categories"),a()},onFailure:function(e){t(e.body,"error")},children:Object(C.jsx)(Ee.a,{children:Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,placeholder:"Fruits",autoFocus:!0,variant:"outlined"})})}))},list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Lt,{}),children:Object(C.jsxs)(Pe.a,{rowClick:"show",children:[Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(De.a,{})]})}))},edit:function(e){var t=Object(Re.a)(),a=Object(E.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{undoable:!1,title:Object(C.jsx)(zt,{}),onFailure:function(e){a(e.body,"error"),t()},children:Object(C.jsx)(Ee.a,{toolbar:Object(C.jsx)(Et,{}),children:Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined"})})}))},name:"categories",icon:Wt.a,show:Mt.a},Ut=a(77),Yt=a(1060),qt=a(1089),Gt=a(1057),Jt=a(1091),Zt=a(1061),Vt=a(121),Ht=a(560),Xt=a(1088),Kt=a(303),$t=a.n(Kt),ea=a(73),ta=a.n(ea),aa=a(115),na=a.n(aa),ra=a(968),ca=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Expense"}))}))},ia=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(kt.a,{source:"expense_type",reference:"expense_types",alwaysOn:!0,variant:"outlined",perPage:1e7,fullWidth:!0,filterToQuery:function(e){return{name:e}},children:Object(C.jsx)(qt.a,{optionText:"name"})})]}))},sa={create:function(e){var t=Object(E.a)(),a=Object(We.a)(),r=Object(Re.a)(),c=n.useState([]),i=Object(F.a)(c,2),o=i[0],d=i[1],u=n.useState([]),b=Object(F.a)(u,2),h=b[0],p=b[1],m=n.useState(),f=Object(F.a)(m,2),g=f[0],y=f[1],v=n.useState(!1),A=Object(F.a)(v,2),S=A[0],w=A[1],_=n.useState(na()().format("YYYY-MM-DD")),k=Object(F.a)(_,2),P=k[0],I=k[1],T=Object(Vt.a)(),N=function(e,t){return Object(s.a)(Object(s.a)({},e),{},{id:t,expense_type_id:e.id,amount:e.default_amount,extend:"Wages"==e.name,extra:null})},M=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,T.getListSimple("expense_types");case 3:t=e.sent,a=t.data,n=x.sort(a).map((function(e,t){return N(e,t)})),d(n),r=n.filter((function(e){return"Wages"==e.name})),p(r),y(r[0]),w(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P||t("Please select date.","error"),n=[],o.forEach((function(e){e.amount.toString().split("+").map((function(e){return parseFloat(e)})).forEach((function(t){t&&t>0&&n.push({date:P,amount:parseFloat(t),expense_type_id:e.expense_type_id,extra:e.extra})}))})),c="".concat(x.api,"expenses"),e.next=6,O.a.post(c,{expenses:n}).then((function(e){e.data;t("Expenses added successfully.","success"),a("/expenses"),r()})).catch((function(e){t("Expenses not added.","error")}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.useEffect(M,[]),S?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):o.length?Object(C.jsx)(D.a,{variant:"elevation",style:{padding:15},children:Object(C.jsxs)(Q.a,{fullWidth:!0,children:[Object(C.jsxs)(R.a,{container:!0,spacing:2,style:{paddingBottom:8},children:[Object(C.jsxs)(R.a,{item:!0,xs:12,md:9,children:[Object(C.jsx)(Xt.a,{value:g,onChange:function(e,t){t&&y(t)},options:h,getOptionLabel:function(e){return"".concat(e.name)},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}}),Object(C.jsx)(ra.a,{children:"Add extra Expense Type"})]}),Object(C.jsx)(R.a,{item:!0,xs:12,md:3,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e=Object(s.a)(Object(s.a)({},g),{},{id:o.length});d(x.sort([].concat(Object(Ut.a)(o),[e])).map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{id:t})})))},children:"Add Expense Type"})})]}),Object(C.jsxs)("div",{style:{marginBottom:10},children:[Object(C.jsx)(U.a,{value:P,variant:"outlined",size:"small",fullWidth:!0,type:"date",onChange:function(e){return I(e.target.value)}}),Object(C.jsx)(ra.a,{children:"Enter Date, enter any date to record expense."})]}),Object(C.jsx)(R.a,{container:!0,spacing:2,style:{padding:8},children:o.map((function(e){return Object(C.jsxs)("div",{style:{marginBottom:10},children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:12,children:Object(C.jsx)(U.a,{style:{padding:2},label:"".concat(e.name,"(").concat(x.currencySymbol,")"),variant:"outlined",size:"small",value:e.amount,onChange:function(t){!function(e,t){var a=Object(Ut.a)(o);a[e].amount=t,d(a)}(e.id,t.target.value)}})}),e.extend&&Object(C.jsx)(U.a,{style:{padding:2},label:"Employee Name",variant:"outlined",size:"small",value:e.extra,onChange:function(t){!function(e,t){var a=Object(Ut.a)(o);a[e].extra=t,d(a)}(e.id,t.target.value)}})]},e.id)}))}),Object(C.jsx)("div",{children:Object(C.jsx)(B.a,{style:{marginTop:10},startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",onClick:W,children:"Add Expense"})})]})}):Object(C.jsx)(D.a,{variant:"elevation",style:{padding:15},children:Object(C.jsx)("div",{children:"No expense types found. Please add."})})},list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(ia,{}),children:Object(C.jsxs)(Pe.a,{rowClick:"show",children:[Object(C.jsx)(_t.a,{source:"expense_type.id",reference:"expense_types",label:"Expense Type",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"amount",label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"extra",label:"E.Name",emptyText:"--"}),Object(C.jsx)(Ie.a,{source:"date"}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Created At"}),Object(C.jsx)(De.a,{}),Object(C.jsx)(Gt.a,{}),Object(C.jsx)(Jt.a,{})]})}))},edit:function(e){var t=Object(Re.a)(),a=Object(E.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{undoable:!1,onFailure:function(e){a(e.body,"error"),t()},children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(ca,{}),children:[Object(C.jsx)(kt.a,{source:"expense_type_id",reference:"expense_types",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",perPage:1e7,filterToQuery:function(e){return{name:e}},children:Object(C.jsx)(qt.a,{optionText:"name"})}),Object(C.jsx)(Zt.a,{source:"amount",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(ke.a,{source:"extra",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Employee Name"})]})}))},name:"expenses",icon:$t.a,show:Mt.a},oa=a(561),la=a.n(oa),ja=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Expense"}))}))},da={create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Expense addedd successfully."),n("/expense_types"),a()},onFailure:function(e){t(e.body,"error")},children:Object(C.jsxs)(Ee.a,{children:[Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined"}),Object(C.jsx)(Zt.a,{source:"default_amount",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Default Amount(".concat(x.currencySymbol,")"),defaultValue:"0"})]})}))},list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,children:Object(C.jsxs)(Pe.a,{rowClick:"show",children:[Object(C.jsx)(Ie.a,{source:"id"}),Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(Ie.a,{source:"default_amount",label:"Default Amount"}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Created At"}),Object(C.jsx)(De.a,{}),Object(C.jsx)(Gt.a,{}),Object(C.jsx)(Jt.a,{})]})}))},edit:function(e){var t=Object(Re.a)(),a=Object(E.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{undoable:!1,onFailure:function(e){a(e.body,"error"),t()},children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(ja,{}),children:[Object(C.jsx)(ke.a,{source:"name",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined"}),Object(C.jsx)(Zt.a,{source:"default_amount",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Default Amount(".concat(x.currencySymbol,")"),defaultValue:"0"})]})}))},name:"expense_types",icon:la.a,show:Mt.a},ua=a(1050),ba=a(1051),Oa=a(1049),xa=a(1041),ha=a(1048),pa=a(562),ma=a.n(pa),fa=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(kt.a,{source:"expense_type",reference:"expense_types",alwaysOn:!0,variant:"outlined",perPage:1e7,fullWidth:!0,filterToQuery:function(e){return{name:e}},children:Object(C.jsx)(qt.a,{optionText:"name"})})]}))},ga=function(e){return{id:e.id,amount:e.amount,date:e.date,extra:e.extra,expense_type:e.expense_type.name}},ya=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1],i=n.useState([]),s=Object(F.a)(i,2),o=s[0],l=s[1],j=n.useState([]),d=Object(F.a)(j,2),u=d[0],b=d[1];n.useEffect((function(){var t=Object.keys(e.data).map((function(t){return e.data[t]}));if(t.length>0){var a={};t.forEach((function(e){void 0===a[e.expense_type.name]?a[e.expense_type.name]=[ga(e)]:a[e.expense_type.name].push(ga(e))}));var n=Object.keys(a).map((function(e){return a[e].reduce((function(e,t){return e+t.amount}),0)}));b(n);var r=Object.keys(a);l(r);var i=Math.max.apply(null,r.map((function(e){return a[e].length})));r.map((function(e){var t=a[e].length;a[e]=a[e].concat(new Array(Math.abs(t-i)).fill(null))}));for(var s=[],o=0;o<i;o++)s.push([]);Object.values(a).map((function(e){e.map((function(e,t){s[t].push(e)}))})),c(s)}else c([]),l([]),b([])}),[e]);var O=n.useRef(),h=Object(bt.useReactToPrint)({content:function(){return O.current}});return r.length>0?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(B.a,{style:{margin:10,float:"right"},variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),onClick:h,children:"Print"}),Object(C.jsxs)(ua.a,{size:"small",ref:O,children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[o.map((function(e,t){return Object(C.jsxs)(xa.a,{children:[e,"(",x.currencySymbol,")"]},t)})),Object(C.jsxs)(xa.a,{children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[r.map((function(e){return Object(C.jsx)(Oa.a,{children:e.map((function(e,t){return Object(C.jsx)(xa.a,{children:e&&Object(C.jsxs)("div",{children:[e.amount.toFixed(2),e.extra&&" - ".concat(e.extra),Object(C.jsx)(ra.a,{children:e.date})]})},t)}))})})),Object(C.jsxs)(Oa.a,{children:[u.map((function(e,t){return Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:e.toFixed(2)})},t)})),Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:u.reduce((function(e,t){return e+t}),0).toFixed(2)})})]})]})]})]}):Object(C.jsx)(D.a,{variant:"outlined",style:{padding:15},children:"Expenses not found."})},va={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{filters:Object(C.jsx)(fa,{}),bulkActionButtons:!1,pagination:!1,hasCreate:!1,perPage:1e6,empty:!1,children:Object(C.jsx)(ya,{})}))},name:"expense_views",icon:ma.a},Aa=a(556),Sa=a(1062),wa=function(e){e.record;return Object(C.jsx)("span",{children:"Inventory"})},_a=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Inventory"}))}))},ka=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"created_at",label:"Select Date",variant:"outlined",alwaysOn:!0}),Object(C.jsx)(kt.a,{source:"item_id",reference:"items",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{name:e}},children:Object(C.jsx)(qt.a,{optionText:"name"})})]}))},Pa={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{filters:Object(C.jsx)(ka,{}),bulkActionButtons:!1,sort:{field:"id",order:"desc"},pagination:Object(C.jsx)(mt,{}),children:Object(C.jsxs)(Pe.a,{rowClick:"edit",children:[Object(C.jsx)(_t.a,{source:"item_id",reference:"items",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"buying_price",label:"Buying Price(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"selling_price",label:"Selling Price(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"unit",label:"Total Units"}),Object(C.jsx)(Ie.a,{source:"remaining_unit",label:"Remaining Units"}),Object(C.jsx)(Fe.a,{source:"tax_available",label:"20% VAT",sortable:!1}),Object(C.jsx)(Fe.a,{source:"active",label:"Price on App",sortable:!1}),Object(C.jsx)(Ie.a,{source:"date",label:"Added"})]})}))},create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),r=Object(We.a)(),c=n.useState([]),i=Object(F.a)(c,2),o=i[0],l=i[1],j=n.useState(0),d=Object(F.a)(j,2),u=d[0],b=d[1],O=Object(Vt.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Inventory addedd successfully."),r("/inventories"),a()},children:Object(C.jsxs)(Ee.a,{children:[Object(C.jsx)(kt.a,{source:"item_id",reference:"items",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",onChange:function(e){return t=e,void O.getListSimple("inventories",{item_id:t}).then((function(e){var t=e.data.map((function(e,t){return{id:parseFloat(e.selling_price),name:"\u20ac ".concat(e.selling_price," - ").concat(e.date),value:parseFloat(e.selling_price)}}));l(t),b(t.length)})).catch((function(e){}));var t},perPage:1e7,filterToQuery:function(e){return{name:e}},children:Object(C.jsx)(qt.a,{optionText:"name"})}),Object(C.jsx)(Zt.a,{source:"buying_price",fullWidth:!0,placeholder:"100",validate:[Object(Le.b)()],label:"Buying Price",variant:"outlined",InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})}}),Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Selling Price",variant:"outlined",size:"small",type:"number",required:!0,onChange:function(e){return function(e){var t=Object(Ut.a)(o);t[u]={id:e,name:"\u20ac ".concat(e||0," - Today"),value:e},l(t)}(parseFloat(e.target.value))},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}}),Object(C.jsx)(Zt.a,{source:"unit",fullWidth:!0,placeholder:"150",label:"Units",variant:"outlined",validate:[Object(Le.b)()],InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:"="})}}),o.length>0&&Object(C.jsx)(Qe.a,{label:"Today's Selling Price",source:"selling_price",choices:o,validate:[Object(Le.b)()],row:!1})]})}))},show:function(e){return Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},e),{},{title:Object(C.jsx)(wa,{}),children:Object(C.jsxs)(Me.a,{children:[Object(C.jsx)(Ie.a,{source:"id"}),Object(C.jsx)(_t.a,{source:"item_id",reference:"items",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"buying_price",label:"Buying Price(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"selling_price",label:"Selling Price(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"unit"}),Object(C.jsx)(Aa.a,{source:"date",showTime:!0})]})}))},edit:function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1],i=n.useState(0),o=Object(F.a)(i,2),l=o[0],j=o[1],d=Object(Vt.a)(),u=function(e){d.getListSimple("inventories",{item_id:e}).then((function(e){var t=e.data.map((function(e,t){return{id:parseFloat(e.selling_price),name:"\u20ac ".concat(e.selling_price," - ").concat(e.date),value:parseFloat(e.selling_price)}}));c(t),j(t.length)})).catch((function(e){}))};return n.useEffect((function(){d.getOne("inventories",{id:e.id}).then((function(e){var t=e.data;u(t.item_id)})).catch((function(e){}))}),[]),Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{undoable:!1,children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(_a,{}),children:[Object(C.jsx)(kt.a,{source:"item_id",reference:"items",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",onChange:function(e){return u(e.target.value)},children:Object(C.jsx)(Pt.a,{optionText:"name"})}),Object(C.jsx)(Zt.a,Object(m.a)({source:"buying_price",InputProps:{inputProps:{max:100,min:10}},fullWidth:!0,placeholder:"100",validate:[Object(Le.b)()],label:"Buying Price",variant:"outlined"},"InputProps",{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})})),Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Selling Price",variant:"outlined",size:"small",type:"number",required:!0,onChange:function(e){return function(e){var t=Object(Ut.a)(r);t[l]={id:e,name:"\u20ac ".concat(e||0," - Today"),value:e},c(t)}(parseFloat(e.target.value))},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}}),r.length>0&&Object(C.jsx)(Qe.a,{label:"Today's Selling Price",source:"selling_price",choices:r,validate:[Object(Le.b)()],row:!1})]})}))},options:{label:"Inventory"},name:"inventories",icon:Sa.a},Ca=a(304),Ia=a.n(Ca),Ta=a(549),Fa=a(987),Da=a(1063),Na=function(e){var t=Object(Ut.a)(e),a=t.reduce((function(e,t){return e+t.price*t.quantity}),0),n=t.reduce((function(e,t){return e+t.tax*t.quantity}),0);return{cart:t.map((function(e){var t;return t={price:parseFloat(e.price).toFixed(2),buying_price:e.buying_price,tax:parseFloat(e.tax),quantity:e.quantity,total:(parseFloat(e.price)*e.quantity).toFixed(2),item_id:e.item_id,inventory_id:e.inventory_id,title:e.title},Object(m.a)(t,"inventory_id",e.inventory_id),Object(m.a)(t,"max",e.max),t})),total:parseFloat(a)+parseFloat(n),sub_total:parseFloat(a),total_tax:parseFloat(n)}},Ba=function(e){var t=e.data,a=e.submitOrder,n=e.setData,r=e.del;if(0==t.cart.length)return Object(C.jsx)("p",{children:"There is no item in cart."});return Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[r&&Object(C.jsx)(xa.a,{style:{width:10}}),Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["Unit Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["20% VAT(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[t.cart.map((function(e,a){var c=parseFloat(e.price)*e.quantity;return c,c+=e.quantity*e.tax,Object(C.jsxs)(Oa.a,{children:[r&&Object(C.jsx)(xa.a,{children:Object(C.jsx)(Da.a,{onClick:function(){return function(e){var a=Object(s.a)({},t);a.cart=a.cart.filter((function(t){return t.inventory_id!=e})),a=Object(s.a)(Object(s.a)({},a),Na(a.cart)),n(a)}(e.inventory_id)},color:"error"})}),Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.title})}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:e.price}),Object(C.jsx)(xa.a,{align:"right",children:e.tax*e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:c.toFixed(2)})})]},a)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:r?5:4,children:Object(C.jsx)("strong",{children:t.total_tax.toFixed(2)})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.sub_total.toFixed(2)})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:r?5:4,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.total.toFixed(2)})})]}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{align:"right",colSpan:6,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",onClick:a,children:"Update Order"})})})]})]})},Ma=Object(ae.a)({root:{marginTop:"1em"},headings:{margin:"10px 6px"},form:{width:"100%"},textInput:{marginTop:8},label:{color:"rgba(0,0,0,0.6)",fontSize:12,margin:"5px 0px"}}),Ra=function(e){var t=Ma(),a=Object(E.a)(),n=Object(Re.a)(),c=Object(We.a)(),i=r.a.useState({cart:[],total_tax:0,sub_total:0,total:0}),o=Object(F.a)(i,2),d=o[0],u=o[1],b=r.a.useState(!1),O=Object(F.a)(b,2),h=O[0],p=O[1],m=r.a.useState(),f=Object(F.a)(m,2),g=f[0],y=f[1],v=r.a.useState([]),A=Object(F.a)(v,2),S=A[0],w=A[1],k=r.a.useState(1),P=Object(F.a)(k,2),I=P[0],T=P[1],W=r.a.useState(0),z=Object(F.a)(W,2),L=z[0],q=z[1],G=r.a.useState([]),J=Object(F.a)(G,2),Z=J[0],V=J[1],H=r.a.useState("Completed"),X=Object(F.a)(H,2),K=X[0],$=X[1],ee=r.a.useState(x.vans[0]),te=Object(F.a)(ee,2),ae=te[0],ne=te[1];r.a.useEffect((function(){(function(){var t=Object(j.a)(l.a.mark((function t(){var r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,_.getOne("orders",{id:e.id});case 4:return r=t.sent,i=r.data,y(i),ne(i.van),u(Object(s.a)(Object(s.a)({},d),{},{cart:i.cart},Na(i.cart))),$(i.status),t.next=12,_.getListSimple("inventories",{available:!0});case 12:o=(o=t.sent.data).map((function(e){return{id:e.id,title:e.title,price:parseFloat(e.selling_price).toFixed(2),buying_price:parseFloat(e.buying_price).toFixed(2),tax:e.tax,quantity:0,item_id:e.item_id,max:e.remaining_unit,date:e.date.split(",")[0]}})).sort((function(e,t){return t.id-e.id})),w(o),V(o[0].id),q(o[0].price),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(1),a("Sorry, order not found.","error"),c("/orders"),n();case 24:p(!1);case 25:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var re=function(){var t=Object(j.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={status:K,van:ae,cart:d.cart,total:d.total,total_tax:d.total_tax},t.prev=1,t.next=4,_.update("orders",{id:e.id,data:r});case 4:c("/orders"),n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(t.t0.body,"error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return h?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):g?Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(D.a,{className:t.root,children:[Object(C.jsx)(M.b,{title:"View Order"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(R.a,{container:!0,spacing:1,children:[Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)("label",{className:t.label,children:"Order#"}),Object(C.jsx)("br",{}),Object(C.jsxs)("span",{children:[" ",g.order_code]})]}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)("label",{className:t.label,children:"Order Date & Time : "}),Object(C.jsx)("br",{}),Object(C.jsxs)("span",{children:[" ",g.created_at]})]}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)("label",{className:t.label,children:"Party"}),Object(C.jsx)("br",{}),Object(C.jsx)("span",{children:Object(C.jsx)(Ta.a,{to:"/parties/".concat(g.party_id,"/show"),target:"_blank",children:g.party_business_name})})]}),Object(C.jsxs)(R.a,{item:!0,xs:12,md:6,children:[Object(C.jsx)("label",{className:t.label,children:"Status"}),Object(C.jsx)("br",{}),"Progress"==g.status||"Canceled"==g.status||"Completed"==g.status?Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsx)(Fa.a,{required:!0,value:K,onChange:function(e){$(e.target.value)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:x.status.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})}):Object(C.jsx)("span",{children:g.status})]}),Object(C.jsxs)(R.a,{item:!0,xs:12,md:6,children:[Object(C.jsx)("label",{className:t.label,children:"Van"}),Object(C.jsx)("br",{}),"Progress"==g.status||"Canceled"==g.status||"Completed"==g.status?Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsx)(Fa.a,{required:!0,value:ae,onChange:function(e){ne(e.target.value)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:x.vans.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})}):Object(C.jsx)("span",{children:g.van})]}),("Progress"==g.status||"Canceled"==g.status||"Completed"==g.status)&&Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)("h4",{className:t.headings,children:"Add Item"}),Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(Fa.a,{required:!0,value:Z,onChange:function(e){V(e.target.value),q(S.filter((function(t){return t.id==e.target.value}))[0].price)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:S.map((function(e,t){return Object(C.jsx)(je.a,{value:e.id,children:"".concat(e.title," - ").concat(x.currencySymbol," ").concat(e.price,", ").concat(e.date)},t)}))})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Quantity",variant:"outlined",size:"small",type:"number",required:!0,value:I,onChange:function(e){return T(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:"="})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"350",label:"Selling Price",variant:"outlined",size:"small",type:"number",required:!0,value:L,onChange:function(e){return q(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if(""==I||parseFloat(I)<=0)return a("Sorry, please select and valid quantity.","error"),void T("");if(Number.isInteger(I/.5)){for(var e=Object(Ut.a)(S.filter((function(e){return e.id==Z})))[0],t=Object(Ut.a)(d.cart),n=!1,r=0;r<t.length;r++)if(t[r].inventory_id==Z){if(t[r].quantity+1>e.max)return void a("Sorry, stock limit reached. Maximum stock is ".concat(e.max," units."),"error");t[r].quantity+=parseFloat(I),n=!0,e=t[r];break}if(n||(e.quantity=parseFloat(I)),e.inventory_id=Z,0!=e.max)if(e.quantity>e.max)a("Sorry, stock limit reached. Maximum stock is ".concat(e.max," units."),"error");else{n||t.push(e);var c=Object(Ut.a)(t);try{c[c.findIndex((function(e){return e.id==Z}))].price=L}catch(l){}var i=c.reduce((function(e,t){return e+t.price*t.quantity}),0),s=c.reduce((function(e,t){return e+t.tax*t.quantity}),0),o={party_id:g.party_id,cart:c.map((function(e){return{price:parseFloat(e.price).toFixed(2),buying_price:e.buying_price,tax:parseFloat(e.tax),quantity:e.quantity,total:(parseFloat(e.price)*e.quantity).toFixed(2),item_id:e.item_id,inventory_id:e.inventory_id,title:e.title,max:e.max}})),total:parseFloat(i)+parseFloat(s),sub_total:parseFloat(i),total_tax:parseFloat(s)};u(o),T("1")}else a("Sorry, item is out of stock.","error")}else a("Sorry, please select quantity of multiple 0.5.","error")},children:"Add Item"})})]})]})}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)("h4",{className:t.headings,children:"Cart"}),Object(C.jsx)(Ba,{data:d,submitOrder:re,setData:u,del:"Progress"==g.status||"Canceled"==g.status})]})]})})]})}):""},Wa=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(ke.a,{label:"Order#",source:"order_code",alwaysOn:!0,variant:"outlined",fullWidth:!0}),Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Pt.a,{choices:x.status.map((function(e){return{id:e,name:e}})),source:"status",label:"Status",variant:"outlined"}),Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"created_at",label:"Date",variant:"outlined"})]}))},za={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Wa,{}),sort:{field:"id",order:"desc"},pagination:Object(C.jsx)(mt,{}),children:Object(C.jsxs)(Pe.a,{rowClick:"edit",children:[Object(C.jsx)(Ie.a,{source:"order_code",label:"Order#",style:{fontWeight:"bold"}}),Object(C.jsx)(_t.a,{source:"party_id",reference:"parties",children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Ie.a,{source:"total_items",label:"Items",sortable:!1}),Object(C.jsx)(Ie.a,{source:"total_quantity",label:"Quantity",sortable:!1}),Object(C.jsx)(Ie.a,{source:"total",label:"Total Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"status"}),Object(C.jsx)(Ie.a,{source:"order_from",label:"Order From"}),Object(C.jsx)(Ie.a,{source:"van"}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Date"})]})}))},name:"orders",icon:Ia.a,edit:Ra,options:{label:"App Orders"}},Ea=a(1064),La=a(1093),Qa=a(1098),Ua=a(1058),Ya=a(965),qa=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(ke.a,{label:"Order#",source:"order_code",alwaysOn:!0,variant:"outlined",fullWidth:!0}),Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Pt.a,{choices:x.status.map((function(e){return{id:e,name:e}})),source:"status",label:"Status",variant:"outlined"}),Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"created_at",label:"Date",variant:"outlined"})]}))},Ga=function(e){var t=e.data,a=e.submitOrder,n=e.setData;if(0==t.cart.length)return Object(C.jsx)("p",{children:"There is no item in cart."});return Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{style:{width:10}}),Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["Unit Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["20% VAT(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[t.cart.map((function(e,a){var r=parseFloat(e.price)*e.quantity;return r,r+=e.quantity*e.tax,Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(q.a,{edge:"end","aria-label":"comments",onClick:function(){return function(e){var a=Object(s.a)({},t);a.cart=a.cart.filter((function(t){return t.inventory_id!=e})),n(a)}(e.inventory_id)},children:Object(C.jsx)(Da.a,{color:"error"})})}),Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.title})}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:e.price}),Object(C.jsx)(xa.a,{align:"right",children:e.tax*e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:r.toFixed(2)})})]},a)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{}),Object(C.jsx)(xa.a,{align:"right"}),Object(C.jsx)(xa.a,{align:"right"}),Object(C.jsx)(xa.a,{align:"right"}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.total_tax.toFixed(2)})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.sub_total.toFixed(2)})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:5,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.total.toFixed(2)})})]}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{align:"right",colSpan:6,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",onClick:a,children:"Add Order"})})})]})]})},Ja=Object(ae.a)({root:{marginTop:"1em"},headings:{margin:"10px 6px"},form:{width:"100%"},textInput:{marginTop:8}}),Za={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(qa,{}),sort:{field:"id",order:"desc"},pagination:Object(C.jsx)(mt,{}),children:Object(C.jsxs)(Pe.a,{rowClick:function(e){return"/orders/".concat(e)},children:[Object(C.jsx)(Ie.a,{source:"order_code",label:"Order#",style:{fontWeight:"bold"}}),Object(C.jsx)(_t.a,{source:"party_id",reference:"parties",children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Ie.a,{source:"total_items",label:"Items",sortable:!1}),Object(C.jsx)(Ie.a,{source:"total_quantity",label:"Quantity",sortable:!1}),Object(C.jsx)(Ie.a,{source:"total",label:"Total Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"status"}),Object(C.jsx)(Ie.a,{source:"order_from",label:"Order From"}),Object(C.jsx)(Ie.a,{source:"van"}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Date"})]})}))},name:"manual_orders",icon:Ea.a,create:function(e){var t=Ja(),a=Object(E.a)(),r=Object(Re.a)(),c=Object(We.a)(),i=n.useState({cart:[],total_tax:0,sub_total:0,total:0}),o=Object(F.a)(i,2),d=o[0],u=o[1],b=n.useState([]),h=Object(F.a)(b,2),p=h[0],m=h[1],f=n.useState([]),g=Object(F.a)(f,2),y=g[0],v=g[1],A=n.useState([]),S=Object(F.a)(A,2),w=S[0],k=S[1],P=n.useState(1),I=Object(F.a)(P,2),T=I[0],W=I[1],z=n.useState(0),L=Object(F.a)(z,2),q=L[0],G=L[1],J=n.useState(x.vans[0]),Z=Object(F.a)(J,2),V=Z[0],H=Z[1],X=n.useState(0),K=Object(F.a)(X,2),$=K[0],ee=K[1],te=n.useState([]),ae=Object(F.a)(te,2),ne=ae[0],re=ae[1],ce=n.useState(!1),ie=Object(F.a)(ce,2),se=ie[0],oe=ie[1];n.useEffect((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.next=3,_.getListSimple("parties");case 3:return t=e.sent,a=t.data,e.next=7,_.getListSimple("inventories",{available:!0});case 7:n=(n=e.sent.data).map((function(e){return{id:e.id,title:e.title,price:parseFloat(e.selling_price).toFixed(2),buying_price:parseFloat(e.buying_price).toFixed(2),tax:e.tax,quantity:0,item_id:e.item_id,max:e.remaining_unit,date:e.date.split(",")[0]}})).sort((function(e,t){return t.id-e.id})),v(n),m(a),re(n[0]),ee(n[0].price),G(n[0].buying_price),k(a[0]),oe(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var le=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(s.a)({},d)).cart=t.cart.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{tax:(e.tax*e.quantity).toFixed(2)})})),t.manual=1,t.bank=be,t.van_id=V,oe(!0),n=x.api+"orders",e.next=9,O.a.post(n,t).then((function(e){oe(!1),a("Manual order added successfully."),c("/manual_orders"),r()})).catch((function(e){a(e,"error"),oe(!1)}));case 9:oe(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=n.useState("No"),ue=Object(F.a)(de,2),be=ue[0],Oe=ue[1];return se?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):Object(C.jsxs)(D.a,{className:t.root,children:[Object(C.jsx)(M.b,{title:"Add Manual Order"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Party"}),Object(C.jsx)(Xt.a,{value:w,onChange:function(e,t){t&&t.id&&k(t)},options:p,getOptionLabel:function(e){return e.business_name},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Van"}),Object(C.jsx)(Fa.a,{required:!0,value:V,onChange:function(e){H(e.target.value)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:x.vans.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Add Bank Information to Invioce"}),Object(C.jsxs)(Qa.a,{value:be,onChange:function(e){Oe(e.target.value)},children:[Object(C.jsx)(Ua.a,{value:"Yes",control:Object(C.jsx)(La.a,{}),label:"Yes"}),Object(C.jsx)(Ua.a,{value:"No",control:Object(C.jsx)(La.a,{}),label:"No"})]})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsxs)(Ya.a,{component:"legend",className:t.headings,children:["Choose Inventory ( ","1. ",Object(C.jsx)(Ta.a,{to:"/inventories/create",target:"_blank",children:"Add Inventory"})," - 2. ",Object(C.jsx)("span",{style:{color:x.colorOne,cursor:"pointer"},onClick:Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getListSimple("inventories",{available:!0});case 2:t=(t=e.sent.data).map((function(e){return{id:e.id,title:e.title,price:parseFloat(e.selling_price).toFixed(2),buying_price:parseFloat(e.buying_price).toFixed(2),tax:e.tax,quantity:0,item_id:e.item_id,max:e.remaining_unit,date:e.date.split(",")[0]}})).sort((function(e,t){return t.id-e.id})),v(t),a("Inventory refetch successfully.","success");case 6:case"end":return e.stop()}}),e)}))),children:"Refetch Inventory"}),")"]}),Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:5,children:Object(C.jsx)(Xt.a,{value:ne,onChange:function(e,t){if(t&&t.id){re(t);var a=y.filter((function(e){return e.id==t.id}))[0];ee(a.price),G(a.buying_price)}},options:y,getOptionLabel:function(e){return"".concat(e.title," - ").concat(x.currencySymbol," ").concat(e.price,", ").concat(e.date)},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:1,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Quantity",variant:"outlined",size:"small",type:"number",required:!0,value:T,onChange:function(e){return W(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:"="})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,disabled:!0,placeholder:"150",label:"Cost Price",variant:"outlined",size:"small",type:"number",required:!0,value:q,readonly:!0,onChange:function(e){return G(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"350",label:"Selling Price",variant:"outlined",size:"small",type:"number",required:!0,value:$,onChange:function(e){return ee(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if(""==T||parseFloat(T)<=0)return a("Sorry, please select and valid quantity.","error"),void W("");if(Number.isInteger(T/.5)){for(var e=Object(Ut.a)(y.filter((function(e){return e.id==ne.id})))[0],t=Object(Ut.a)(d.cart),n=!1,r=0;r<t.length;r++)if(t[r].inventory_id==ne.id){if(t[r].quantity+1>e.max)return void a("Sorry, stock limit reached. Maximum stock is ".concat(e.max," units."),"error");t[r].quantity+=parseFloat(T),n=!0,e=t[r];break}if(n||(e.quantity=parseFloat(T)),e.inventory_id=ne.id,0!=e.max)if(e.quantity>e.max)a("Sorry, stock limit reached. Maximum stock is ".concat(e.max," units."),"error");else{n||t.push(e);var c=Object(Ut.a)(t);try{c[c.findIndex((function(e){return e.id==ne.id}))].price=$}catch(l){}var i=c.reduce((function(e,t){return e+t.price*t.quantity}),0),s=c.reduce((function(e,t){return e+t.tax*t.quantity}),0),o={party_id:w.id,cart:c.map((function(e){return{price:parseFloat(e.price).toFixed(2),buying_price:e.buying_price,tax:parseFloat(e.tax),quantity:e.quantity,total:(parseFloat(e.price)*e.quantity).toFixed(2),item_id:e.item_id,inventory_id:e.inventory_id,title:e.title,max:e.max}})),total:parseFloat(i)+parseFloat(s),sub_total:parseFloat(i),total_tax:parseFloat(s)};u(o),W("1")}else a("Sorry, item is out of stock.","error")}else a("Sorry, please select quantity of multiple 0.5.","error")},children:"Add Item"})})]})]})}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Cart"}),Object(C.jsx)(Ga,{data:d,submitOrder:le,setData:u})]})]})})]})},options:{label:"Manual Orders"}},Va=a(555),Ha=a(557),Xa=a(563),Ka=a.n(Xa),$a=a(124),en=a.n($a),tn=a(1065),an=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined",alwaysOn:!0}),Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"})]}))},nn=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1];n.useEffect((function(){c(Object.keys(e.data).map((function(t){return e.data[t]})).sort((function(e,t){return e.sr-t.sr})))}),[e.data]);var i=0;return Object(C.jsx)(ua.a,{size:"small",children:Object(C.jsx)(ha.a,{children:r.map((function(e){return i=0,Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsxs)("div",{style:{paddingLeft:15},children:[Object(C.jsx)("strong",{children:"Sr# "}),e.sr]})}),Object(C.jsxs)(xa.a,{align:"right",children:[Object(C.jsx)(ot.a,{onClick:function(){window.open("#/purchase_invoices/create/".concat(e.id),"_blank")},label:"generate Invoice",children:Object(C.jsx)(en.a,{})},"button"),Object(C.jsx)(ot.a,{onClick:function(){window.location="#/purchase_orders/".concat(e.id)},label:"Edit",children:Object(C.jsx)(Ka.a,{})},"button"),Object(C.jsx)(jt,{dispatchCrudDelete:!1,startUndoable:!1,resource:"purchase_orders",record:e,undoable:!1})]})]}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{colSpan:2,children:Object(C.jsx)("div",{style:{paddingLeft:15},children:Object(C.jsxs)("strong",{children:["Party Name :"," ",Object(C.jsx)("span",{style:{color:"#f5881f"},children:e.party.business_name})]})})})}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{colSpan:2,children:Object(C.jsxs)("div",{style:{paddingLeft:15},children:[Object(C.jsx)("strong",{children:"Date : "}),e.created_at]})})}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{colSpan:2,children:Object(C.jsxs)("div",{style:{paddingLeft:15},children:[Object(C.jsx)("strong",{children:"Van : "}),e.van]})})}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{colSpan:3,children:Object(C.jsxs)(ua.a,{size:"small",style:{marginBottom:20},children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Name "}),Object(C.jsx)(xa.a,{children:"Type"}),Object(C.jsx)(xa.a,{children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[e.cart.map((function(e){return i+=parseFloat(e.total),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{style:{width:"40%"},children:e.name}),Object(C.jsx)(xa.a,{style:{width:"20%"},children:e.type}),Object(C.jsx)(xa.a,{style:{width:"5%"},children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",style:{width:"20%"},children:e.price}),Object(C.jsx)(xa.a,{align:"right",style:{width:"20%"},children:e.total})]})})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:4,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:i.toFixed(2)})})]})]})]})})})]})}))})})},rn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)(nn,Object(s.a)({},this.props))}}]),a}(n.Component),cn=function(e){var t,a=n.useState(!1),r=Object(F.a)(a,2),c=r[0],i=r[1];return Object(C.jsx)(C.Fragment,{children:Object.keys(e.data).length>0&&Object(C.jsxs)("div",{style:{marginRight:10},children:[Object(C.jsx)(Ot.a,{onAfterPrint:function(){return i(!1)},trigger:function(){return Object(C.jsx)("div",{style:{float:"right",marginTop:10,marginBottom:10},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},onBeforeGetContent:Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,x.sleep(1);case 3:case"end":return e.stop()}}),e)}))),pageStyle:"padding:20px",content:function(){return t}}),Object(C.jsx)(rn,Object(s.a)({ref:function(e){return t=e},print:c},e))]})})},sn=function(e,t){return e.cart.filter((function(e){return e.type===x.boxTypes[t]})).reduce((function(e,t){return e+parseFloat(t.quantity)}),0)},on=function(e){var t=e.data,a=e.submitOrder,n=e.setData,r=e.add;if(0===t.cart.length)return Object(C.jsx)("p",{children:"There is no item in cart."});var c=sn(t,0),i=sn(t,1),o=sn(t,2);return Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{style:{width:10}}),Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{align:"right",children:"Type"}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[t.cart.map((function(e,a){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(q.a,{edge:"end","aria-label":"comments",onClick:function(){return function(e){var a=Object(s.a)({},t);a.cart=a.cart.filter((function(t){return t.id!==e}));var r=a.cart.reduce((function(e,t){return e+parseFloat(t.price)*parseFloat(t.quantity)}),0);a.total=r,n(a)}(e.id)},children:Object(C.jsx)(Da.a,{color:"error"})})}),Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.name})}),Object(C.jsx)(xa.a,{align:"right",children:e.type}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:parseFloat(e.price).toFixed(2)}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(e.price*parseFloat(e.quantity)).toFixed(2)})})]},a)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:5,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(t.total).toFixed(2)})})]}),Object(C.jsx)(Oa.a,{children:Object(C.jsxs)(xa.a,{align:"right",colSpan:6,children:[Object(C.jsx)("strong",{children:"Total : "})," ",Object(C.jsx)("strong",{children:c})," ",x.boxTypes[0],","," ",Object(C.jsx)("strong",{children:i}),", ",x.boxTypes[1],", ",Object(C.jsx)("strong",{children:o})," ",x.boxTypes[2]]})}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{align:"right",colSpan:7,children:Object(C.jsxs)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",onClick:a,children:[r?"Add":"Update"," Purchase Order"]})})})]})]})},ln=Object(ae.a)({root:{marginTop:"1em"},headings:{margin:"10px 6px"},form:{width:"100%"},textInput:{marginTop:8}}),jn={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:Object(C.jsx)(mt,{})},e),{},{filters:Object(C.jsx)(an,{}),sort:{field:"id",order:"desc"},children:Object(C.jsx)(cn,{})}))},name:"purchase_orders",icon:tn.a,create:function(e){var t=ln(),a=Object(E.a)(),r=Object(Re.a)(),c=Object(We.a)(),i=n.useState({cart:[],total:0}),o=Object(F.a)(i,2),d=o[0],u=o[1],b=n.useState([]),h=Object(F.a)(b,2),p=h[0],m=h[1],f=n.useState([]),g=Object(F.a)(f,2),y=g[0],v=g[1],A=n.useState([]),S=Object(F.a)(A,2),w=S[0],k=S[1],P=n.useState(1),I=Object(F.a)(P,2),T=I[0],W=I[1],z=n.useState(x.vans[0]),L=Object(F.a)(z,2),q=L[0],G=L[1],J=n.useState(x.boxTypes[0]),Z=Object(F.a)(J,2),V=Z[0],H=Z[1],X=n.useState([]),K=Object(F.a)(X,2),$=K[0],ee=K[1],te=n.useState(0),ae=Object(F.a)(te,2),ne=ae[0],re=ae[1],ce=n.useState(!1),ie=Object(F.a)(ce,2),se=ie[0],oe=ie[1];n.useEffect((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.next=3,_.getListSimple("parties");case 3:return t=e.sent,a=t.data,e.next=7,_.getListSimple("items",{available:!0});case 7:n=e.sent.data.sort((function(e,t){return e.name-t.name})),v(n),m(a),ee(n[0]),k(a[0]),oe(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var le=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(s.a)({},d)).cart=t.cart.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{total:parseFloat(parseFloat(e.price)*parseFloat(e.quantity)).toFixed(2),price:parseFloat(e.price).toFixed(2)})})),t.van_id=q,oe(!0),n=x.api+"purchase_orders",e.next=7,O.a.post(n,t).then((function(){oe(!1),a("Purchase order added successfully."),c("/purchase_orders"),r()})).catch((function(e){a(e,"error"),oe(!1)}));case 7:oe(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return se?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):Object(C.jsxs)(D.a,{className:t.root,children:[Object(C.jsx)(M.b,{title:"Add Purchase Order"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsxs)(Ya.a,{component:"legend",className:t.headings,children:["Party ( ","1. ",Object(C.jsx)(Ta.a,{to:"/parties/create",target:"_blank",children:"Add Party"})," - 2. ",Object(C.jsx)("span",{style:{color:x.colorOne,cursor:"pointer"},onClick:Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getListSimple("parties",{available:!0});case 2:t=e.sent.data,m(t),a("Parties refetch successfully.","success");case 5:case"end":return e.stop()}}),e)}))),children:"Refetch Parties"}),")"]}),Object(C.jsx)(Xt.a,{value:w,onChange:function(e,t){t&&t.id&&k(t)},options:p,getOptionLabel:function(e){return e.business_name},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Van"}),Object(C.jsx)(Fa.a,{required:!0,value:q,onChange:function(e){G(e.target.value)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:x.vans.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:4,children:Object(C.jsx)(Xt.a,{value:$,onChange:function(e,t){t&&t.id&&(ee(t),W(1))},options:y,getOptionLabel:function(e){return"".concat(e.name)},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsx)(Fa.a,{required:!0,value:V,onChange:function(e){H(e.target.value),W(1)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Box Type",children:x.boxTypes.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Quantity",variant:"outlined",size:"small",type:"number",required:!0,value:T,onChange:function(e){V===x.boxTypes[2]?W(parseFloat(e.target.value)):W(parseInt(e.target.value))},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:"="})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"120.85",label:"Unit Price",variant:"outlined",size:"small",type:"number",required:!0,value:ne,onChange:function(e){return re(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if((""===T||parseInt(T)<=0)&&V!==x.boxTypes[2])a("Sorry, please enter any valid integral quantity.","error");else if(""!==T&&parseFloat(T)%.5===0||V!==x.boxTypes[2])if("undefined"!=typeof ne&&""!==ne){var e=d.cart,t=e.filter((function(e){return e.item_id===$.id&&e.type===V}))[0];if(t)t.quantity=parseFloat(t.quantity)+parseFloat(T),t.price=parseFloat(ne);else{var n=0===e.length?1:e[e.length-1].id+1;e.push({id:n,item_id:$.id,name:$.name,type:V,quantity:T,price:ne})}var r=e.reduce((function(e,t){return e+parseFloat(t.price)*parseFloat(t.quantity)}),0),c={party_id:w.id,cart:e,total:r};u(c),re(0)}else a("Sorry, please enter any valid price.","error");else a("Sorry, please enter any valid float quantity for Loose Items.","error")},children:"Add Item"})})]})})}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Cart"}),Object(C.jsx)(on,{data:d,submitOrder:le,setData:u,add:!0})]})]})})]})},edit:function(e){var t=ln(),a=Object(E.a)(),r=Object(Re.a)(),c=Object(We.a)(),i=n.useState({cart:[]}),o=Object(F.a)(i,2),d=o[0],u=o[1],b=n.useState([]),O=Object(F.a)(b,2),h=O[0],p=O[1],m=n.useState([]),f=Object(F.a)(m,2),g=f[0],y=f[1],v=n.useState([]),A=Object(F.a)(v,2),S=A[0],w=A[1],k=n.useState(1),P=Object(F.a)(k,2),I=P[0],T=P[1],W=n.useState(x.vans[0]),z=Object(F.a)(W,2),L=z[0],q=z[1],G=n.useState(x.boxTypes[0]),J=Object(F.a)(G,2),Z=J[0],V=J[1],H=n.useState([]),X=Object(F.a)(H,2),K=X[0],$=X[1],ee=n.useState(!1),te=Object(F.a)(ee,2),ae=te[0],ne=te[1],re=n.useState(0),ce=Object(F.a)(re,2),ie=ce[0],se=ce[1];n.useEffect((function(){(function(){var t=Object(j.a)(l.a.mark((function t(){var n,i,s,o,j;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne(!0),t.prev=1,t.next=4,_.getListSimple("parties");case 4:return n=t.sent,i=n.data,t.next=8,_.getListSimple("items",{available:!0});case 8:return s=t.sent.data.sort((function(e,t){return e.name-t.name})),t.next=11,_.getOne("purchase_orders",{id:e.id});case 11:o=t.sent,j=o.data,u({cart:j.cart,total:j.total}),q(j.van),y(s),p(i),$(s[0]),w(j.party),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(1),a("Sorry, purchase order not found.","error"),c("/purchase_orders"),r();case 26:ne(!1);case 27:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var oe=function(){var t=Object(j.a)(l.a.mark((function t(){var n,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Object(s.a)({},d)).cart=n.cart.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{total:parseFloat(parseFloat(e.price)*parseFloat(e.quantity)).toFixed(2),price:parseFloat(e.price).toFixed(2)})})),i=n.cart.reduce((function(e,t){return e+parseFloat(t.price)*parseFloat(t.quantity)}),0),o={van_id:L,cart:n.cart,party_id:S.id,total:i},t.prev=4,t.next=7,_.update("purchase_orders",{id:e.id,data:o});case 7:c("/purchase_orders"),r(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),a(t.t0.body,"error");case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}();return ae?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):Object(C.jsxs)(D.a,{className:t.root,children:[Object(C.jsx)(M.b,{title:"Update Purchase Order"}),Object(C.jsx)(N.a,{children:Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Party"}),Object(C.jsx)(Xt.a,{value:S,onChange:function(e,t){t&&t.id&&w(t)},options:h,getOptionLabel:function(e){return e.business_name},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Van"}),Object(C.jsx)(Fa.a,{required:!0,value:L,onChange:function(e){q(e.target.value)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Party",children:x.vans.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})]})}),Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:12,md:4,children:Object(C.jsx)(Xt.a,{value:K,onChange:function(e,t){t&&t.id&&($(t),T(1))},options:g,getOptionLabel:function(e){return"".concat(e.name)},renderInput:function(e){return Object(C.jsx)(U.a,Object(s.a)(Object(s.a)({},e),{},{label:"",variant:"outlined",size:"small"}))}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(Q.a,{className:t.form,size:"small",children:Object(C.jsx)(Fa.a,{required:!0,value:Z,onChange:function(e){V(e.target.value),T(1)},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Box Type",children:x.boxTypes.map((function(e,t){return Object(C.jsx)(je.a,{value:e,children:e},t)}))})})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"150",label:"Quantity",variant:"outlined",size:"small",type:"number",required:!0,value:I,onChange:function(e){Z===x.boxTypes[2]?T(parseFloat(e.target.value)):T(parseInt(e.target.value))},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:"="})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(U.a,{fullWidth:!0,placeholder:"120.85",label:"Unit Price",variant:"outlined",size:"small",type:"number",required:!0,value:ie,onChange:function(e){return se(e.target.value)},InputProps:{startAdornment:Object(C.jsx)(Y.a,{position:"start",children:x.currencySymbol})},style:{marginBottom:20}})}),Object(C.jsx)(R.a,{item:!0,xs:12,md:2,children:Object(C.jsx)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if((""===I||parseInt(I)<=0)&&Z!==x.boxTypes[2])a("Sorry, please enter any valid integral quantity.","error");else if(""!==I&&parseFloat(I)%.5===0||Z!==x.boxTypes[2])if(""!==ie&&"undefined"!=typeof ie){var e=d.cart,t=e.filter((function(e){return e.item_id===K.id&&e.type===Z}))[0];if(t)t.quantity=parseFloat(t.quantity)+parseFloat(I),t.price=parseFloat(ie);else{var n=0===e.length?1:e[e.length-1].id+1;e.push({id:n,item_id:K.id,name:K.name,type:Z,quantity:I,price:ie})}var r=e.reduce((function(e,t){return e+parseFloat(t.price)*parseFloat(t.quantity)}),0),c={party_id:S.id,cart:e,total:r};u(c)}else a("Sorry, please enter any valid price.","error");else a("Sorry, please enter any valid float quantity for Loose Items.","error")},children:"Add Item"})})]})})}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Cart"}),Object(C.jsx)(on,{data:d,submitOrder:oe,setData:u})]})]})})]})},options:{label:"Purchase Orders"},show:function(e){return Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsxs)(Me.a,{children:[Object(C.jsx)(Ie.a,{source:"id"}),Object(C.jsx)(_t.a,{source:"party_id",reference:"parties",children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Va.a,{source:"cart",children:Object(C.jsxs)(Pe.a,{children:[Object(C.jsx)(Ie.a,{source:"id"}),Object(C.jsx)(_t.a,{source:"item_id",reference:"items",children:Object(C.jsx)(Ie.a,{source:"name"})}),Object(C.jsx)(Ie.a,{source:"name"}),Object(C.jsx)(Ie.a,{source:"type"}),Object(C.jsx)(Ha.a,{source:"quantity"}),Object(C.jsx)(Ie.a,{source:"price"}),Object(C.jsx)(Ie.a,{source:"total"})]})}),Object(C.jsx)(Ie.a,{source:"van"}),Object(C.jsx)(Ie.a,{source:"total"}),Object(C.jsx)(Ie.a,{source:"created_at"})]})}))}},dn=function(e){return Object(C.jsx)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(Yt.a,{source:"current_date",alwaysOn:!0,variant:"outlined"})}))},un=function(e){var t=Object(E.a)(),a=Object.keys(e.data).map((function(t){return e.data[t]})),r=n.useState({}),c=Object(F.a)(r,2),i=c[0],o=c[1],d=[],u=[];a.forEach((function(e){e.cart.forEach((function(e){d.push({id:e.item_id,name:e.name,type:e.type,quantity:parseFloat(e.quantity)})}))}));for(var b=0;b<d.length;b++){var h=Object(s.a)(Object(s.a)({},d[b]),{},{quantity:parseFloat(d[b].quantity)}),p=x.filter(u,h);0===p.length?u.push(h):1===p.length&&((p=p[0]).quantity=parseFloat(p.quantity)+parseFloat(h.quantity))}for(var f=[],g=0;g<u.length;g++){var y=u[g],v=x.filter(f,y,!1);0===v.length?f.push({item_id:y.id,name:y.name,total:Object(m.a)({},y.type,"".concat(y.quantity))}):(v=v[0]).total=Object(s.a)(Object(s.a)({},v.total),{},Object(m.a)({},y.type,"".concat(y.quantity)))}f.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}));var A=function(){var e=Object(j.a)(l.a.mark((function e(a,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(x.api,"purchase_order_costing"),Object.values(i).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{price:0,created_at:new Date})}))).then((function(e){t("All given costs are updated.","success")})).catch((function(e){console.log(e),t("Error occured!","error")}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return 0==f.length?Object(C.jsx)("div",{style:{padding:10},children:"No data to show..."}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{style:{display:"flex",justifyContent:"end",padding:"10px 35px 10px 0px"},children:Object(C.jsx)(B.a,{onClick:A,startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",children:"Update All Costs"})}),Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{children:"Type"}),Object(C.jsx)(xa.a,{children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"center",style:{width:"20%"},children:["Cost Price(",x.currencySymbol,")"]})]})}),Object(C.jsx)(ha.a,{children:f.map((function(e,t){return Object.keys(e.total).map((function(a,n){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:e.name}),Object(C.jsx)(xa.a,{children:a}),Object(C.jsx)(xa.a,{children:e.total[a]}),Object(C.jsx)(xa.a,{align:"center",children:Object(C.jsx)(U.a,{placeholder:"0.00",variant:"outlined",size:"small",type:"number",inputProps:{style:{textAlign:"center"}},onChange:function(t){!function(e,t,a){var n=Object(s.a)({},i);n[t]={cost_price:parseFloat(e),item_type:a,item_id:t},o(n)}(t.target.value,e.item_id,a)}})})]},"".concat(t,"_").concat(n))}))}))})]})]})},bn={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(dn,{}),pagination:!1,hasCreate:!1,empty:!1,filterDefaultValues:{current_date:Date()},children:Object(C.jsx)(un,{})}))},name:"purchase_order_costing",icon:en.a},On=a(568),xn=a.n(On),hn=a(564),pn=a.n(hn),mn=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined",alwaysOn:!0}),Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"})]}))},fn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"normalize",value:function(e){var t="";return t+="".concat(e[x.boxTypes[0]]?e[x.boxTypes[0]]:0," ").concat(x.boxTypes[0],", "),t+="".concat(e[x.boxTypes[1]]?e[x.boxTypes[1]]:0," ").concat(x.boxTypes[1],", "),t+="".concat(e[x.boxTypes[2]]?e[x.boxTypes[2]]:0," ").concat(x.boxTypes[2])}},{key:"render",value:function(){var e=this,t=x.sort(this.props.allCart.map((function(t,a){return Object(s.a)(Object(s.a)({},t),{},{id:a,total:e.normalize(t.total)})})),"name");return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{style:{display:"flex",padding:"15px 10px",border:"1px solid #555",borderRadius:4,marginBottom:10,marginLeft:11},children:[Object(C.jsxs)("div",{style:{flex:.5},children:[Object(C.jsx)("strong",{children:"Date : "}),(new Date).toLocaleDateString()]}),Object(C.jsxs)("div",{style:{flex:1},children:[Object(C.jsx)("strong",{children:"Driver Name : "}),Object(C.jsx)("div",{style:{textDecoration:"underline",display:"inline-block",width:"60%",borderBottom:"2px dotted #000"}})]}),Object(C.jsxs)("div",{style:{flex:1},children:[Object(C.jsx)("strong",{children:"Signature : "}),Object(C.jsx)("div",{style:{textDecoration:"underline",display:"inline-block",width:"60%",borderBottom:"2px dotted #000"}})]})]}),Object(C.jsx)(pn.a,{columns:[{name:"Item",selector:function(e){return e.name},sortable:!0},{name:"Van",selector:function(e){return e.van},sortable:!0},{name:"Total",selector:function(e){return e.total}}],data:t,pagination:!0,paginationComponentOptions:{selectAllRowsItem:!0,selectAllRowsItemText:"All Items"}})]})}}]),a}(n.Component),gn=function(e){var t=Object.keys(e.data).map((function(t){return e.data[t]})),a=[],n=[];t.forEach((function(e){e.cart.forEach((function(t){a.push({name:t.name,type:t.type,quantity:parseFloat(t.quantity),van:e.van})}))}));for(var r=0;r<a.length;r++){var c=Object(s.a)(Object(s.a)({},a[r]),{},{quantity:parseFloat(a[r].quantity)}),i=x.filter(n,c);0===i.length?n.push(c):1===i.length&&((i=i[0]).quantity=parseFloat(i.quantity)+parseFloat(c.quantity))}for(var o,l=[],j=0;j<n.length;j++){var d=n[j],u=x.filter(l,d,!1);0===u.length?l.push({name:d.name,van:d.van,total:Object(m.a)({},d.type,"".concat(d.quantity))}):(u=u[0]).total=Object(s.a)(Object(s.a)({},u.total),{},Object(m.a)({},d.type,"".concat(d.quantity)))}return Object(C.jsx)(C.Fragment,{children:t.length>0&&Object(C.jsxs)("div",{style:{marginRight:10},children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10,marginBottom:10},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},pageStyle:"padding:20px",content:function(){return o}}),Object(C.jsx)(fn,{ref:function(e){return o=e},data:t,allCart:l})]})})},yn={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:!1},e),{},{filters:Object(C.jsx)(mn,{}),children:Object(C.jsx)(gn,{})}))},name:"purchase_items",icon:xn.a,options:{label:"Purchase Items"}},vn=a(305),An=a.n(vn),Sn=a(1081),wn=a(1066),_n=a(36),kn=Object(ae.a)((function(e){return{card:{minHeight:52,display:"flex",flexDirection:"column",flex:"1","& a":{textDecoration:"none",color:"inherit"}},main:function(){return{overflow:"inherit",padding:16,background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAABZCAYAAADII9YOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFF2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wNy0xNFQyMzozODoyNiswNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDctMTVUMDA6MDI6MDQrMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDctMTVUMDA6MDI6MDQrMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZjM5OGFlZGItZmUyNS05YjQ3LTg2YWQtOTg0NzRjNjFhYjQwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOmYzOThhZWRiLWZlMjUtOWI0Ny04NmFkLTk4NDc0YzYxYWI0MCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmYzOThhZWRiLWZlMjUtOWI0Ny04NmFkLTk4NDc0YzYxYWI0MCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjM5OGFlZGItZmUyNS05YjQ3LTg2YWQtOTg0NzRjNjFhYjQwIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTE0VDIzOjM4OjI2KzA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s/sJYQAABLBJREFUeJzt3V+o33Mcx/HX0S4O0Wpi/o1ypUSR/A8rkaKkXXBv7hRy4cKVIpGi3ZlyQf61mCgstVg2ZAirLUVs/oyshpwlmYvfMHP+/77f3/uc83k8rk7f36/T8+7V59v3fM/YxMSfB8ORvk5yU5Lt8/0F4+Nj3dUAwAyOqg5YoE5P8kaSS6pDAGA2DPrUjk/yapKLqkMAYCYGfXorkmxMcnZxBwBMy6DP7KQkG5KsrA4BgKkY9Nk5K8mz1REAMBWDPnurk6yvjgCAyRj0ubk1yR3VEQBwpDF/hz4vlyd5Z7ov+Dt0AEbJCX1+1lUHAMDhDPr8nJfkoeoIAPibW+7DuSLJlsk+cMsdgFFyQh/Og9UBAJAY9GFdmmRtdQQAuOU+vD1JVh150S13AEbJCX14pyW5qzoCgLY5oXdjdwb/cvUfTugAjJITejdWZfAWOQAoYdC74+E4AMoY9O5cmMFT7wAwcga9WzdXBwDQJoPerTXVAQC0yaB36+QkV1ZHANAeg969a6oDAGiPQe/e6uoAANrjxTL9OHp8fOxAdQQA7XBC78cF1QEAtMWg9+Oc6gAA2mLQ+3FWdQAAbTHo/TizOgCAthj0fpxaHQBAWwx6P06sDgCgLQa9H8urAwBoi0Hvx7HVAQC0xaADwBJg0AFgCTDo/fi1OgCAthj0fuyvDgCgLQa9Hz9UBwDQFoPej2+qAwBoi0HvxxfVAQC0xaD3Y2d1AABtMej9+LQ6AIC2GPR+fFAdAEBbDHr3tiU5UB0BQFsMevc2VwcA0B6D3r1N1QEAtMegd+u7JG9VRwDQHoPerQ3VAQC0yaB367nqAADaZNC7836SrdURALTJoHdnfXUAAO0am5j482B1xBKwO8nph18YHx8rSgGgRU7o3Xi0OgCAtjmhD29PklVHXnRCB2CUnNCHd191AAA4oQ9na5LLJvvACR2AUXJCH8491QEAkBj0YTycZEt1BAAkbrnP10dJzp/uC265AzBKTujzc3t1AAAczqDP3Z1J3qmOAIDDGfS5eSJeIgPAAmTQZ29zkrXVEQAwGYM+OzuT3FIdAQBTMegz+z7JmiR7q0MAYCoGfXr7ktyYZEdxBwBMy6BP7ack1yd5rzoEAGZi0Cf3dZJrk2yrDgGA2TDo//dRkquTbK8OAYDZMuj/9WqSq5J8XtwBAHNi0P/1WJIbkvxcHQIAc7WsOmCBuC3J+uoIAJiv1k/o25NcEGMOwCLX8qA/ksGYe/gNgEWvxUH/LMl1Se6uDgGArrQ26PcnOSfJ69UhANClVgb9pSTnJrm3OgQA+rDUn3J/N8kDSV6pDgGAPi3VQf84g4feni7uAICRWGqD/m6SdUmeqQ4BgFFaKoO+McnjSV4r7gCAEot50L9N8lSSJ5PsKm4BgFKLcdBfSPJ8kherQwBgoVgMg/5HBk+pv5zBiP9SmwMAC89CHfRdSd5MsimDl8D8XpsDAAvbQhn0TzJ4Qn1rkreTfFmbAwCLy6gHfV8Gp+8dGbxT/eMkH8ZtdAAYyrIkFyc5I8lpSU5JsjLJCUlWJFme5Lgkxxz6eTL7k/yWwSjvz2C0f0yyN4Mn0fck+SrJF4euAwAd+wswtJlqxCMd8AAAAABJRU5ErkJggg==",") no-repeat"),display:"flex",justifyContent:"space-between",alignItems:"center","& .icon":{color:x.colorOne}}},title:{}}})),Pn=function(e){var t=e.icon,a=e.title,r=e.subtitle,c=e.to,i=e.children,s=e.color,o=kn(e);return Object(C.jsxs)(D.a,{className:o.card,children:[Object(C.jsx)(_n.a,{to:c,children:Object(C.jsxs)("div",{className:o.main,children:[Object(C.jsx)(Sn.a,{width:"3em",className:"icon",children:Object(n.createElement)(t,{fontSize:"large"})}),Object(C.jsxs)(Sn.a,{textAlign:"right",children:[Object(C.jsx)(te.a,{className:o.title,color:"textSecondary",children:a}),Object(C.jsx)(te.a,{variant:"h5",component:"h2",style:{color:s||"#000"},children:r||"\u2000"})]})]})}),i&&Object(C.jsx)(wn.a,{}),i]})},Cn=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",children:Object(C.jsx)(Pt.a,{optionText:"business_name"})}),Object(C.jsx)(ke.a,{label:"Order#",source:"order_code",alwaysOn:!0,variant:"outlined",fullWidth:!0})]}))},In=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1],i=n.useState({totalProfit:0,totalRevenue:0,totalBuying:0,totalTax:0}),s=Object(F.a)(i,2),o=s[0],l=s[1];n.useEffect((function(){var t={totalProfit:0,totalRevenue:0,totalBuying:0,totalTax:0},a=Object.keys(e.data).map((function(t){return e.data[t]})).sort((function(e,t){return t.id-e.id}));c(a);for(var n=0;n<a.length;n++){t.totalRevenue+=parseFloat(a[n].total),t.totalTax+=parseFloat(a[n].total_tax);for(var r=0;r<a[n].cart.length;r++)t.totalProfit+=parseFloat(a[n].cart[r].profit),t.totalBuying+=parseFloat(a[n].cart[r].buying_price)*a[n].cart[r].quantity}l(t)}),[e]);var j={flex:{display:"flex"},leftCol:{flex:1,margin:"0.5em"}},d=function(e){var t=e.title,a=e.sub,n=e.color;return Object(C.jsx)("div",{style:j.leftCol,children:Object(C.jsx)("div",{style:j.flex,children:Object(C.jsx)(Pn,{to:"/orders",color:n,icon:function(){return Object(C.jsx)("h1",{style:{padding:0,margin:0,marginTop:-10},children:x.currencySymbol})},title:t,subtitle:a})})})};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{style:j.flex,children:[Object(C.jsx)(d,{title:"Total Amount Spent",sub:o.totalBuying.toFixed(2)}),Object(C.jsx)(d,{title:"20% VAT",sub:o.totalTax.toFixed(2),color:"red"}),Object(C.jsx)(d,{title:"Profit",sub:o.totalProfit.toFixed(2),color:o.totalProfit<=0?"red":"green"}),Object(C.jsx)(d,{title:"Total Revenue",sub:o.totalRevenue.toFixed(2)})]}),Object(C.jsx)("div",{style:{margin:"10px 0"},children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Order Code"}),Object(C.jsx)(xa.a,{children:"Party"}),Object(C.jsx)(xa.a,{children:"Cart"})]})}),Object(C.jsx)(ha.a,{children:r&&r.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/orders/".concat(e.id),target:"_blank",children:e.order_code})}),Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/parties/".concat(e.party_id),target:"_blank",children:e.party_business_name})}),Object(C.jsx)(xa.a,{children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsxs)(xa.a,{align:"right",children:["Buying Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Sold Price(",x.currencySymbol,")"]}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["Sub Total(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["20% VAT(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Profit(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[e.cart.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id),target:"_blank",children:e.title})}),Object(C.jsx)(xa.a,{align:"right",children:e.buying_price}),Object(C.jsx)(xa.a,{align:"right",children:e.price}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:e.total})}),Object(C.jsx)(xa.a,{align:"right",children:e.tax}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:e.total_with_tax})}),Object(C.jsx)(xa.a,{align:"right",style:{color:e.profit<0?"red":"green"},children:Object(C.jsx)("strong",{children:e.profit})})]},t)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{colSpan:5,align:"right",children:Object(C.jsxs)("strong",{children:["Totals(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total_tax})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",style:{color:e.total_profit<0?"red":"green"},children:Object(C.jsx)("strong",{children:e.total_profit})})]})]})]})})]},t)}))})]})})]})},Tn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:!1},this.props),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Cn,{}),sort:{field:"id",order:"desc"},children:Object(C.jsx)(In,{})}))})}}]),a}(n.PureComponent),Fn={list:function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10,marginBottom:10},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},content:function(){return e.componentRef}}),Object(C.jsx)(Tn,Object(s.a)({ref:function(t){return e.componentRef=t}},this.props))]})}}]),a}(n.PureComponent),name:"order_reports",icon:An.a,options:{label:"Order Reportings"}},Dn=a(71),Nn=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined",alwaysOn:!0})]}))},Bn=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1],i=n.useState({totalProfit:0,totalRevenue:0,totalBuying:0,totalTax:0}),s=Object(F.a)(i,2),o=s[0],d=s[1],u=n.useState(0),b=Object(F.a)(u,2),O=b[0],h=b[1],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t,a,n=new URLSearchParams(window.location.href),r=Object(Dn.a)(n);try{for(r.s();!(a=r.n()).done;){var c=a.value;t=c[1];break}}catch(s){r.e(s)}finally{r.f()}t=JSON.parse(t);var i=Object.keys(t);return i.indexOf(e)>-1&&t[e]}catch(o){return!1}},m=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n,c,i,s,o,j,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p("start_date"),a=p("end_date"),n=!0,t&&a?(c=x.getDaysBetweenDates(na()(t),na()(a)),n=!1):c=r.map((function(e){return e.created_at})).filter(x.uniqueValuesFromArray),!(c.length>0)){e.next=14;break}if(n)for(i=0;i<c.length;i++)s=c[i].split("/"),c[i]=s[2]+"-"+s[1]+"-"+s[0];return e.next=8,_.getListSimple("expenses",{dates:c.join(",")});case 8:o=e.sent,j=o.data,d=j.reduce((function(e,t){return e+t.amount}),0),h(d),e.next=15;break;case 14:h(0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.useEffect(m,[o.totalProfit,window.location.href]),n.useEffect((function(){var t={totalProfit:0,totalRevenue:0,totalBuying:0,totalTax:0},a=Object.keys(e.data).map((function(t){return e.data[t]})).sort((function(e,t){return t.id-e.id}));c(a);for(var n=0;n<a.length;n++){t.totalTax+=parseFloat(a[n].total_tax);for(var r=0;r<a[n].cart.length;r++)t.totalProfit+=parseFloat(a[n].cart[r].profit),t.totalBuying+=parseFloat(a[n].cart[r].cost_price)*a[n].cart[r].quantity;t.totalProfit-=parseFloat(a[n].discount_amount)}d(t)}),[e]);var f={flex:{display:"flex"},leftCol:{flex:1,margin:"0.5em"}},g=function(e){var t=e.title,a=e.sub,n=e.color;return Object(C.jsx)("div",{style:f.leftCol,children:Object(C.jsx)("div",{style:f.flex,children:Object(C.jsx)(Pn,{to:"/orders",color:n,icon:function(){return Object(C.jsx)("h1",{style:{padding:0,margin:0,marginTop:-10},children:x.currencySymbol})},title:t,subtitle:a})})})};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{style:f.flex,children:[Object(C.jsx)(g,{title:"Total Spent",sub:o.totalBuying.toFixed(2)}),Object(C.jsx)(g,{title:"Expense",sub:O.toFixed(2),color:"red"}),Object(C.jsx)(g,{title:"Profit",sub:o.totalProfit.toFixed(2),color:o.totalProfit<=0?"red":"green"}),Object(C.jsx)(g,{title:"Net Profit",sub:(o.totalProfit-O).toFixed(2),color:o.totalProfit-O<=0?"red":"green"}),Object(C.jsx)(g,{title:"Total Revenue",sub:(o.totalBuying+(o.totalProfit-O)).toFixed(2)})]}),Object(C.jsx)("div",{style:{margin:"10px 0"},children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Date"}),Object(C.jsx)(xa.a,{children:"Party"}),Object(C.jsx)(xa.a,{children:"Cart"})]})}),Object(C.jsx)(ha.a,{children:r&&r.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:e.created_at}),Object(C.jsx)(xa.a,{style:{width:"10%"},children:Object(C.jsx)(Ta.a,{to:"/parties/".concat(e.party_id),target:"_blank",children:e.party_business_name})}),Object(C.jsx)(xa.a,{children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{children:"Type"}),Object(C.jsxs)(xa.a,{align:"right",children:["Cost Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Sell Price(",x.currencySymbol,")"]}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"right",children:["20% VAT(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Profit(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[e.cart.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id),target:"_blank",children:e.name})}),Object(C.jsx)(xa.a,{children:e.type}),Object(C.jsx)(xa.a,{align:"right",children:e.cost_price}),Object(C.jsx)(xa.a,{align:"right",children:e.price}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:e.tax}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(e.total).toFixed(2)})}),Object(C.jsx)(xa.a,{align:"right",style:{color:e.profit<0?"red":"green"},children:Object(C.jsx)("strong",{children:e.profit})})]},t)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{colSpan:5,align:"right",children:Object(C.jsxs)("strong",{children:["Actual Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total_tax})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total_without_discount})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",style:{color:e.profit<0?"red":"green"},children:Object(C.jsx)("strong",{children:e.profit})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{colSpan:5,align:"right",children:Object(C.jsxs)("strong",{children:["Discount(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:"--"})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.discount_amount})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:"--"})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{colSpan:5,align:"right",children:Object(C.jsxs)("strong",{children:["Grand Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total_tax})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",children:Object(C.jsx)("strong",{children:e.total})}),Object(C.jsx)(xa.a,{colSpan:1,align:"right",style:{color:e.total_profit<0?"red":"green"},children:Object(C.jsx)("strong",{children:e.total_profit})})]})]})]})})]},t)}))})]})})]})},Mn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:Object(C.jsx)(mt,{})},this.props),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Nn,{}),sort:{field:"id",order:"desc"},children:Object(C.jsx)(Bn,{})}))})}}]),a}(n.PureComponent),Rn={list:function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{margin:10,display:"block",textAlign:"right"},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},content:function(){return e.componentRef}}),Object(C.jsx)(Mn,Object(s.a)({ref:function(t){return e.componentRef=t}},this.props))]})}}]),a}(n.PureComponent),name:"purchase_order_reports",icon:An.a,options:{label:"Order Reportings"}},Wn=a(569),zn=a.n(Wn),En=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Yt.a,{source:"created_at",alwaysOn:!0,variant:"outlined",label:"Select Date"}),Object(C.jsx)(Pt.a,{alwaysOn:!0,choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined"})]}))},Ln=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1];n.useEffect((function(){var t=function(e){var t=e.reduce((function(e,t){return e[t.van]=[].concat(Object(Ut.a)(e[t.van]||[]),[t.cart.map((function(e){return{item_id:e.item_id,inventory_id:e.inventory_id,quantity:e.quantity,title:e.title}}))]),e}),{});return t=Object.keys(t).sort().reduce((function(e,a){return e[a]=t[a],e}),{}),Object.keys(t).map((function(e){var a=t[e],n=[];a.map((function(e){e.map((function(e){n.push(e)}))})),t[e]=n})),Object.keys(t).map((function(e){var a=[];return t[e].reduce((function(e,t){return e[t.inventory_id]||(e[t.inventory_id]={inventory_id:t.inventory_id,quantity:0,item_id:t.item_id,title:t.title},a.push(e[t.inventory_id])),e[t.inventory_id].quantity+=t.quantity,e}),{}),t[e]=a,a})),t}(Object.keys(e.data).map((function(t){return e.data[t]})).filter((function(e){return"Progress"===e.status})).sort((function(e,t){return t.id-e.id})));c(t)}),[e]);return 0==Object.keys(e.data).length?Object(C.jsx)("p",{style:{margin:10},children:"Sorry, no records found!"}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{style:{margin:"10px 0"},children:r&&Object.keys(r).map((function(e){return Object(C.jsxs)("div",{style:{marginBottom:10},children:[Object(C.jsx)("h4",{style:{margin:0,marginLeft:14,color:x.colorOne},children:"null"==e?"Unspecified Van":e}),Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:"Item"})}),Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:"Quantity"})})]})}),Object(C.jsx)(ha.a,{children:r[e].map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{style:{width:"50%"},children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.title})}),Object(C.jsx)(xa.a,{style:{width:"50%"},children:e.quantity})]},t)}))})]})]})}))})})},Qn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:!1},this.props),{},{bulkActionButtons:!1,filters:Object(C.jsx)(En,{}),sort:{field:"id",order:"desc"},children:Object(C.jsx)(Ln,{})}))})}}]),a}(n.PureComponent),Un={list:function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10,marginBottom:10},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},content:function(){return e.componentRef}}),Object(C.jsx)(Qn,Object(s.a)({ref:function(t){return e.componentRef=t}},this.props))]})}}]),a}(n.PureComponent),name:"van_reports",icon:zn.a,options:{label:"Van Reportings"}},Yn=(a(796),function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined",alwaysOn:!0}),Object(C.jsx)(Yt.a,{source:"current_date",alwaysOn:!0,variant:"outlined"})]}))}),qn=function(e){var t=n.useState({}),a=Object(F.a)(t,2),r=a[0],c=a[1];return n.useEffect((function(){var t={};Object.keys(e.data).map((function(t){return e.data[t]})).sort((function(e,t){return t.id-e.id})).forEach((function(e){t[e.party.business_name]={total_amount:parseFloat(e.total).toFixed(2),transactions_total:parseFloat(e.transactions_total).toFixed(2),name:e.party.business_name,transactions:e.transactions}})),t=Object.keys(t).sort().reduce((function(e,a){return e[a]=t[a],e}),{}),c(t)}),[e.data]),0===Object.keys(r).length?Object(C.jsx)("div",{style:{padding:10},children:"Loading..."}):Object(C.jsxs)("div",{style:{padding:10},children:[Object(C.jsxs)("div",{style:{display:"flex",padding:"15px 10px",border:"1px solid #555",borderRadius:4,marginBottom:10},children:[Object(C.jsxs)("div",{style:{flex:1},children:[Object(C.jsx)("strong",{children:"Date : "}),na()().format("DD-MMM-YYYY")]}),Object(C.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex"},children:[Object(C.jsx)("div",{style:{flex:.4,textAlign:"right"},children:Object(C.jsx)("strong",{children:"Driver Name : "})}),Object(C.jsx)("div",{style:{flex:1,borderBottom:"2px dotted #555"}})]})]}),Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{style:{width:"35%",fontWeight:"bold"},children:"Customer"}),Object(C.jsxs)(xa.a,{style:{width:"15%",fontWeight:"bold"},align:"center",children:["Total Amount(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{style:{width:"25%",fontWeight:"bold"},align:"center",children:["Received Amount(",x.currencySymbol,")"]}),Object(C.jsx)(xa.a,{style:{width:"35%",fontWeight:"bold"},align:"center",children:"Missing Items"})]})}),Object(C.jsx)(ha.a,{children:Object.keys(r).map((function(e,t){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Oa.a,{style:{border:"1px solid #000",borderRadius:4},children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:r[e].name})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:r[e].transactions_total})}),Object(C.jsx)(xa.a,{align:"center",style:{border:"1px solid #ccc"}}),Object(C.jsx)(xa.a,{style:{border:"1px solid #ccc"},align:"center"})]}),r[e].transactions.length>0&&Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{colSpan:2,style:{paddingLeft:0,paddingRight:6},children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:"Date"})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsxs)("strong",{children:["Unpaid Transaction Amount(",x.currencySymbol,")"]})})]})}),Object(C.jsx)(ha.a,{children:r[e].transactions.map((function(e){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:na()(e.date).format("DD/MM/YYYY")}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(e.amount).toFixed(2)})})]})}))})]})}),Object(C.jsx)(xa.a,{colSpan:2})]})]})}))})]})]})},Gn=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)(qn,Object(s.a)({},this.props))}}]),a}(n.PureComponent),Jn=function(e){var t;return 0==Object.keys(e.data).length?Object(C.jsx)("div",{style:{padding:10},children:"No records found."}):Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{margin:10,display:"inline-block"},children:Object(C.jsx)("div",{children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})})},pageStyle:"padding:20px",content:function(){return t}}),Object(C.jsx)(Gn,Object(s.a)({ref:function(e){return t=e}},e))]})},Zn={name:"daily_invoice_reports",list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(Yn,{}),pagination:!1,sort:{field:"id",order:"desc"},hasCreate:!1,perPage:1e6,empty:!1,children:Object(C.jsx)(Jn,{})}))},icon:en.a},Vn=a(570),Hn=a.n(Vn),Xn=a.p+"static/media/logo.4c228112.png",Kn=function(e){var t=e.record;return t?Object(C.jsxs)(te.a,{children:[Object(C.jsx)("strong",{children:t.business_name}),Object(C.jsx)("br",{}),t.address,Object(C.jsx)("br",{}),t.contact_number]}):null},$n=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return this.classes={root:{margin:"auto",border:"none"},spacer:{height:20},invoices:{margin:"10px 0"},margin0:{margin:0},margin1:{margin:0,marginTop:5}},this.props.record?Object(C.jsx)(D.a,{style:this.classes.root,children:Object(C.jsxs)(N.a,{children:[Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("img",{src:Xn,style:{width:100},alt:"logo"}),Object(C.jsx)("h4",{style:this.classes.margin0,children:"Everyday Fresh Food Ltd."}),Object(C.jsx)("p",{style:this.classes.margin0,children:"Unit 25 Chalwyn Industrial Estate"}),Object(C.jsx)("p",{style:this.classes.margin0,children:"Parkstone, Poole"}),Object(C.jsx)("p",{style:this.classes.margin0,children:"BH12 4PE"}),Object(C.jsx)("p",{style:this.classes.margin0,children:Object(C.jsx)("strong",{children:"Tel : 01202 801167"})}),Object(C.jsx)("h4",{style:this.classes.margin1,children:"Banking Information"}),Object(C.jsxs)("p",{style:this.classes.margin0,children:["Cheque payable to ",Object(C.jsx)("strong",{children:"Everyday Fresh Food Ltd."})]}),1==this.props.record.bank_visible&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("p",{style:this.classes.margin1,children:[Object(C.jsx)("strong",{children:"Account Name:"})," Everyday fresh Food"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Account:"})," 30106852"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Sort Code:"})," 40-18-00"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Bank Name:"})," HSBC"]})]})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("img",{src:Xn,style:{width:100,opacity:0},alt:"logo"}),Object(C.jsxs)("h4",{style:{margin:0},children:["Invoice# ",this.props.record.id]}),Object(C.jsx)(Kn,{record:this.props.record.party})]})]}),Object(C.jsx)("div",{style:this.classes.spacer,children:"\xa0"}),Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsxs)(R.a,{item:!0,xs:6,children:[Object(C.jsx)(te.a,{variant:"h6",gutterBottom:!0,align:"center",children:"Date"}),Object(C.jsx)(te.a,{gutterBottom:!0,align:"center",children:this.props.record.created_at})]}),Object(C.jsxs)(R.a,{item:!0,xs:5,children:[Object(C.jsx)(te.a,{variant:"h6",gutterBottom:!0,align:"center",children:"Order"}),Object(C.jsx)(te.a,{gutterBottom:!0,align:"center",children:this.props.record.order.order_code})]})]}),Object(C.jsx)("div",{style:this.classes.invoices,children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:["Unit Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[this.props.record.order.cart.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.title})}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:e.price}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:e.total})})]},t)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{}),Object(C.jsx)(xa.a,{align:"right"}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsxs)("strong",{children:["20% VAT(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:this.props.record.order.total_tax})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{}),Object(C.jsx)(xa.a,{align:"right"}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:this.props.record.order.total})})]})]})]})}),Object(C.jsx)(R.a,{container:!0,spacing:2,children:Object(C.jsx)(R.a,{item:!0,xs:12,children:Object(C.jsx)("h4",{children:Object(C.jsx)("i",{children:" Thank you for your business with us."})})})})]})}):null}}]),a}(n.PureComponent),er=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(ke.a,{label:"Order#",source:"order_code",alwaysOn:!0,variant:"outlined",fullWidth:!0}),Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"})]}))},tr=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10,marginBottom:10},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},content:function(){return e.componentRef}}),Object(C.jsx)($n,Object(s.a)({ref:function(t){return e.componentRef=t}},this.props))]})}}]),a}(n.PureComponent),ar={list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({pagination:!1},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(er,{}),sort:{field:"id",order:"desc"},children:Object(C.jsxs)(Pe.a,{rowClick:"expand",expand:Object(C.jsx)(tr,{}),children:[Object(C.jsx)(Ie.a,{source:"id",label:"Invoice#",style:{fontWeight:"bold"}}),Object(C.jsx)(Ie.a,{source:"order.order_code",label:"Order Code"}),Object(C.jsx)(_t.a,{source:"order.party_id",reference:"parties",label:"Party",sortable:!1,children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Ie.a,{source:"order.total_items",label:"Items",sortable:!1}),Object(C.jsx)(Ie.a,{source:"order.total_quantity",label:"Quantity",sortable:!1}),Object(C.jsx)(Ie.a,{sortable:!1,source:"order.total",label:"Total Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Date"})]})}))},name:"invoices",icon:Hn.a,show:tr},nr=a(571),rr=a.n(nr),cr=function(e){var t=e.record;return t?Object(C.jsxs)(te.a,{align:"right",children:[Object(C.jsx)("strong",{children:t.business_name}),Object(C.jsx)("br",{}),t.address,Object(C.jsx)("br",{}),t.contact_number]}):null},ir=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return this.classes={root:{margin:"auto",border:"none"},spacer:{height:20},invoices:{margin:"10px 0"},margin0:{margin:0},margin1:{margin:0,marginTop:5}},this.props.record?Object(C.jsx)(D.a,{style:this.classes.root,children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)("img",{src:"https://i.ibb.co/JHsgN8d/logo.png",style:{width:150},alt:"logo"}),Object(C.jsxs)("div",{style:{width:"100%"},children:[Object(C.jsxs)("div",{style:{width:"50%",display:"inline-block"},children:[Object(C.jsx)("h4",{style:this.classes.margin0,children:"Everyday Fresh Food Ltd."}),Object(C.jsx)("p",{style:this.classes.margin0,children:"Unit 25 Chalwyn Industrial Estate"}),Object(C.jsx)("p",{style:this.classes.margin0,children:"Parkstone, Poole"}),Object(C.jsx)("p",{style:this.classes.margin0,children:"BH12 4PE"}),Object(C.jsx)("p",{style:this.classes.margin0,children:Object(C.jsx)("strong",{children:"Tel : 01202 801167"})}),Object(C.jsx)("h4",{style:this.classes.margin1,children:"Banking Information"}),Object(C.jsxs)("p",{style:this.classes.margin0,children:["Cheque payable to ",Object(C.jsx)("strong",{children:"Everyday Fresh Food Ltd."})]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:["VAT registration number: ",Object(C.jsx)("strong",{children:"409 2028 21"})]}),1==this.props.record.bank_visible&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("p",{style:this.classes.margin1,children:[Object(C.jsx)("strong",{children:"Account Name:"})," Everyday fresh Food"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Account:"})," 30106852"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Sort Code:"})," 40-18-00"]}),Object(C.jsxs)("p",{style:this.classes.margin0,children:[Object(C.jsx)("strong",{children:"Bank Name:"})," HSBC"]})]}),Object(C.jsxs)("p",{style:this.classes.margin1,children:[Object(C.jsx)("strong",{children:"Date : "}),Object(C.jsx)("i",{children:this.props.record.created_at})]})]}),Object(C.jsxs)("div",{style:{width:"50%",display:"inline-block",verticalAlign:"top"},children:[Object(C.jsxs)("h4",{style:{margin:0,textAlign:"right"},children:["Invoice# ",this.props.record.id]}),Object(C.jsx)(cr,{record:this.props.record.party})]})]}),Object(C.jsx)("div",{style:this.classes.spacer,children:"\xa0"}),Object(C.jsx)("div",{style:this.classes.invoices,children:Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{children:"Type"}),Object(C.jsx)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:["Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{style:this.classes.rightAlignedCell,align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[this.props.record.cart.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)("strong",{children:e.name})}),Object(C.jsx)(xa.a,{children:e.type}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"right",children:parseFloat(e.price).toFixed(2)}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(e.total).toFixed(2)})})]},t)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:4,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:this.props.record.total_without_discount})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:4,children:Object(C.jsxs)("strong",{children:["Discount(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:this.props.record.discount_amount})})]}),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:4,children:Object(C.jsxs)("strong",{children:["Total Amount(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:this.props.record.total})})]})]})]})}),Object(C.jsx)(R.a,{container:!0,spacing:2,children:Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)("i",{style:{width:"100%"},children:"Please provide invoice number's reference when using bank transfer."}),Object(C.jsx)("h4",{style:{padding:0,marginTop:8},children:Object(C.jsx)("i",{children:" Thank you for your business with us."})})]})})]})}):"Sorry, Invalid Invioce."}}]),a}(n.PureComponent),sr=a(611),or=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Pt.a,{choices:x.vans.map((function(e){return{id:e,name:e}})),source:"van",label:"Van",variant:"outlined",alwaysOn:!0}),Object(C.jsx)(Yt.a,{source:"start_date",alwaysOn:!0,variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"end_date",alwaysOn:!0,variant:"outlined"})]}))},lr=function(e){var t=n.useRef(),a=Object(E.a)(),r=n.useState(""),c=Object(F.a)(r,2),i=c[0],o=c[1],d=n.useState(!1),u=Object(F.a)(d,2),b=u[0],h=u[1];n.useEffect((function(){o(e.record.party.email)}),[e]);var p=Object(bt.useReactToPrint)({content:function(){return t.current},copyStyles:!0,print:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c,s,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:if(h(!0),!(n=t.contentDocument)){e.next=12;break}for(r=[{removed:'<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap">',replace:""},{removed:'<div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-2">',replace:'<div style="width:100%" class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-2">'},{removed:'style="width: 100%;"',replace:'style="width: 100%;margin-top:20px"'}],c=n.getElementsByTagName("html")[0].innerHTML,s=0;s<r.length;s++)o=r[s],c=c.replace(o.removed,o.replace);return j=x.api+"send_email",e.next=12,O.a.post(j,{invoice_message:c,emails:i}).then((function(e){a(e.data,"info")})).catch((function(e){a(e.data,"error")}));case 12:h(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),m=Object(bt.useReactToPrint)({content:function(){return t.current}});return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U.a,{style:{margin:10,width:"40%"},variant:"outlined",margin:"dense",label:"Enter Email",size:"small",onChange:function(e){return o(e.target.value)},value:i}),Object(C.jsxs)(B.a,{style:{margin:10,marginTop:12},variant:"outlined",color:"primary",startIcon:Object(C.jsx)(rr.a,{fontSize:"inherit"}),onClick:p,children:["Email Invoice"," ",b&&Object(C.jsx)(sr.a,{size:20,style:{marginLeft:6}})]}),Object(C.jsx)(B.a,{style:{marginTop:4},variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),onClick:m,children:"Print"}),Object(C.jsx)(ir,Object(s.a)({ref:t},e))]})},jr=function(e){var t=e.record;return Object(C.jsx)(jt,{dispatchCrudDelete:!1,startUndoable:!1,resource:"purchase_invoices",record:t,undoable:!1})},dr=function(e,t){return e.cart.filter((function(e){return e.type===x.boxTypes[t]})).reduce((function(e,t){return e+parseFloat(t.quantity)}),0)},ur=function(e){var t=e.data,a=e.submitOrder,n=e.setData,r=e.add,c=Object(oe.a)().permissions;if(0===t.cart.length)return Object(C.jsx)("p",{children:"There is no item in cart."});var i=dr(t,0),o=dr(t,1),l=dr(t,2),j=function(e,a,r){var c=Object(s.a)({},t);c.cart[r][a]=e;var i=c.cart.reduce((function(e,t){return parseFloat(e)+parseFloat(t.price)*parseFloat(t.quantity)}),0);c.total=parseFloat(i),n(c)};return Object(C.jsxs)(ua.a,{size:"small",children:[Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Item"}),Object(C.jsx)(xa.a,{align:"right",children:"Type"}),Object(C.jsx)(xa.a,{align:"right",children:"Quantity"}),Object(C.jsxs)(xa.a,{align:"center",style:{width:"20%"},children:["Cost Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"center",style:{width:"20%"},children:["Sell Price(",x.currencySymbol,")"]}),Object(C.jsxs)(xa.a,{align:"right",children:["Total(",x.currencySymbol,")"]})]})}),Object(C.jsxs)(ha.a,{children:[t.cart.map((function(e,t){return Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:Object(C.jsx)(Ta.a,{to:"/items/".concat(e.item_id,"/show"),target:"_blank",children:e.name})}),Object(C.jsx)(xa.a,{align:"right",children:e.type}),Object(C.jsx)(xa.a,{align:"right",children:e.quantity}),Object(C.jsx)(xa.a,{align:"center",children:c==x.superAdminRole?Object(C.jsx)(U.a,{variant:"outlined",size:"small",type:"number",value:e.cost_price,inputProps:{style:{textAlign:"center"}},onChange:function(e){j(e.target.value,"cost_price",t)}}):e.cost_price}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)(U.a,{variant:"outlined",size:"small",type:"number",value:e.price,inputProps:{style:{textAlign:"center"}},onChange:function(e){j(e.target.value,"price",t)}})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(e.price*parseFloat(e.quantity)).toFixed(2)})})]},t)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:5,children:Object(C.jsxs)("strong",{children:["Total(",x.currencySymbol,")"]})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:parseFloat(t.total).toFixed(2)})})]}),Object(C.jsx)(Oa.a,{children:Object(C.jsxs)(xa.a,{align:"right",colSpan:6,children:[Object(C.jsx)("strong",{children:"Total : "})," ",Object(C.jsx)("strong",{children:i})," ",x.boxTypes[0],","," ",Object(C.jsx)("strong",{children:o}),", ",x.boxTypes[1],", ",Object(C.jsx)("strong",{children:l})," ",x.boxTypes[2]]})}),Object(C.jsx)(Oa.a,{children:Object(C.jsx)(xa.a,{align:"right",colSpan:7,children:Object(C.jsxs)(B.a,{startIcon:Object(C.jsx)(ta.a,{}),variant:"contained",color:"primary",onClick:a,children:[r?"Add":"Update"," Purchase Invoice"]})})})]})]})},br=Object(ae.a)({root:{marginTop:"1em"},headings:{margin:"10px 6px"},form:{width:"100%"},textInput:{marginTop:8}}),Or={options:{label:"Purchase Invoices"},create:function(e){var t=br(),a=Object(E.a)(),r=Object(Re.a)(),c=Object(We.a)(),i=n.useState({cart:[],total:0}),o=Object(F.a)(i,2),d=o[0],u=o[1],b=n.useState(!1),h=Object(F.a)(b,2),p=h[0],m=h[1],f=n.useState(x.discounts[0]),g=Object(F.a)(f,2),y=g[0],v=g[1],A=n.useState([]),S=Object(F.a)(A,2),w=S[0],_=S[1];n.useEffect((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=window.location.href.split("/"),a=t[t.length-1],n="".concat(x.api,"revised_purchase_orders?purchase_order_id=").concat(a),e.next=6,O.a.get(n).then((function(e){var t=e.data[0];_(t||[]),t&&u(Object(s.a)(Object(s.a)({},d),{},{cart:t.cart,total:parseFloat(t.total),purchase_order_id:t.id}))})).catch((function(){_([])}));case 6:m(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(s.a)({},d)).cart=t.cart.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{total:parseFloat(parseFloat(e.price)*parseFloat(e.quantity)),price:parseFloat(e.price).toFixed(2),cost_price:parseFloat(e.cost_price).toFixed(2)})})),t.total=t.cart.map((function(e){return parseFloat(e.total)})).reduce((function(e,t){return e+t}),0),t.van_id=w.van,t.party_id=w.party.id,t.bank=T,t.discount=y.value,t.total=Math.round(100*t.total)/100,m(!0),n=x.api+"purchase_invoices",e.next=12,O.a.post(n,t).then((function(e){m(!1),a("Purchase invoice added successfully."),c("/purchase_invoices"),r()})).catch((function(e){a(e,"error"),m(!1)}));case 12:m(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=n.useState("No"),I=Object(F.a)(P,2),T=I[0],B=I[1];return p?Object(C.jsx)(Ht.a,{loadingPrimary:"",loadingSecondary:""}):0==w.length?Object(C.jsx)(D.a,{children:Object(C.jsx)(N.a,{children:"Sorry, Invalid purchase order."})}):Object(C.jsxs)(D.a,{className:t.root,children:[Object(C.jsx)(M.b,{title:"Add Purchase Invoice"}),Object(C.jsxs)(N.a,{children:[Object(C.jsx)(ua.a,{size:"small",children:Object(C.jsxs)(ha.a,{children:[Object(C.jsx)(Oa.a,{children:Object(C.jsxs)(xa.a,{children:[Object(C.jsx)("strong",{children:"Party: "}),w.party.business_name]})}),Object(C.jsx)(Oa.a,{children:Object(C.jsxs)(xa.a,{children:[Object(C.jsx)("strong",{children:"Van: "}),w.van]})}),Object(C.jsx)(Oa.a,{children:Object(C.jsxs)(xa.a,{children:[Object(C.jsx)("strong",{children:"Date: "}),w.created_at]})})]})}),Object(C.jsxs)(R.a,{container:!0,spacing:2,children:[Object(C.jsx)(R.a,{item:!0,xs:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Discount"}),Object(C.jsx)(Fa.a,{required:!0,value:y.value,onChange:function(e){v({value:e.target.value,label:100*e.target.value+"%"})},displayEmpty:!0,fullWidth:!0,variant:"outlined",placeholder:"Discount",children:x.discounts.map((function(e,t){return Object(C.jsx)(je.a,{value:e.value,children:e.label},t)}))})]})}),Object(C.jsx)(R.a,{item:!0,xs:6,children:Object(C.jsxs)(Q.a,{className:t.form,size:"small",children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Add Bank Information to Invioce"}),Object(C.jsxs)(Qa.a,{value:T,onChange:function(e){B(e.target.value)},row:!0,children:[Object(C.jsx)(Ua.a,{value:"Yes",control:Object(C.jsx)(La.a,{}),label:"Yes"}),Object(C.jsx)(Ua.a,{value:"No",control:Object(C.jsx)(La.a,{}),label:"No"})]})]})}),Object(C.jsxs)(R.a,{item:!0,xs:12,children:[Object(C.jsx)(Ya.a,{component:"legend",className:t.headings,children:"Cart"}),Object(C.jsx)(ur,{data:d,submitOrder:k,setData:u,add:!0})]})]})]})]})},list:function(e){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({},e),{},{bulkActionButtons:!1,filters:Object(C.jsx)(or,{}),pagination:Object(C.jsx)(mt,{}),sort:{field:"id",order:"desc"},hasCreate:!1,children:Object(C.jsxs)(Pe.a,{children:[Object(C.jsx)(Ie.a,{source:"id",label:"Invoice#",style:{fontWeight:"bold"}}),Object(C.jsx)(_t.a,{source:"party_id",reference:"parties",label:"Party",sortable:!1,children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Ha.a,{sortable:!1,source:"total_without_discount",label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ha.a,{sortable:!1,source:"discount_amount",label:"Discount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ha.a,{sortable:!1,source:"total",label:"Total Amount(".concat(x.currencySymbol,")"),style:{fontWeight:"bold",textAlign:"right"}}),Object(C.jsx)(Ie.a,{source:"van",sortable:!1}),Object(C.jsx)(Ie.a,{source:"created_at",label:"Date"}),Object(C.jsx)(Ie.a,{source:"status",sortable:!1}),Object(C.jsx)(Gt.a,{}),Object(C.jsx)(jr,{})]})}))},name:"purchase_invoices",icon:en.a,show:function(e){return Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(lr,Object(s.a)({},e))}))}},xr=a.p+"static/media/logo.4c228112.png",hr=a(154),pr=a(1100),mr=a(1101),fr=Object(ae.a)((function(e){return{card:{minHeight:52,display:"flex",flexDirection:"column",flex:"1","& a":{textDecoration:"none",color:"inherit"}},main:function(){return{overflow:"inherit",padding:16,background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAABZCAYAAADII9YOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFF2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wNy0xNFQyMzozODoyNiswNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDctMTVUMDA6MDI6MDQrMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDctMTVUMDA6MDI6MDQrMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZjM5OGFlZGItZmUyNS05YjQ3LTg2YWQtOTg0NzRjNjFhYjQwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOmYzOThhZWRiLWZlMjUtOWI0Ny04NmFkLTk4NDc0YzYxYWI0MCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmYzOThhZWRiLWZlMjUtOWI0Ny04NmFkLTk4NDc0YzYxYWI0MCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjM5OGFlZGItZmUyNS05YjQ3LTg2YWQtOTg0NzRjNjFhYjQwIiBzdEV2dDp3aGVuPSIyMDIxLTA3LTE0VDIzOjM4OjI2KzA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s/sJYQAABLBJREFUeJzt3V+o33Mcx/HX0S4O0Wpi/o1ypUSR/A8rkaKkXXBv7hRy4cKVIpGi3ZlyQf61mCgstVg2ZAirLUVs/oyshpwlmYvfMHP+/77f3/uc83k8rk7f36/T8+7V59v3fM/YxMSfB8ORvk5yU5Lt8/0F4+Nj3dUAwAyOqg5YoE5P8kaSS6pDAGA2DPrUjk/yapKLqkMAYCYGfXorkmxMcnZxBwBMy6DP7KQkG5KsrA4BgKkY9Nk5K8mz1REAMBWDPnurk6yvjgCAyRj0ubk1yR3VEQBwpDF/hz4vlyd5Z7ov+Dt0AEbJCX1+1lUHAMDhDPr8nJfkoeoIAPibW+7DuSLJlsk+cMsdgFFyQh/Og9UBAJAY9GFdmmRtdQQAuOU+vD1JVh150S13AEbJCX14pyW5qzoCgLY5oXdjdwb/cvUfTugAjJITejdWZfAWOQAoYdC74+E4AMoY9O5cmMFT7wAwcga9WzdXBwDQJoPerTXVAQC0yaB36+QkV1ZHANAeg969a6oDAGiPQe/e6uoAANrjxTL9OHp8fOxAdQQA7XBC78cF1QEAtMWg9+Oc6gAA2mLQ+3FWdQAAbTHo/TizOgCAthj0fpxaHQBAWwx6P06sDgCgLQa9H8urAwBoi0Hvx7HVAQC0xaADwBJg0AFgCTDo/fi1OgCAthj0fuyvDgCgLQa9Hz9UBwDQFoPej2+qAwBoi0HvxxfVAQC0xaD3Y2d1AABtMej9+LQ6AIC2GPR+fFAdAEBbDHr3tiU5UB0BQFsMevc2VwcA0B6D3r1N1QEAtMegd+u7JG9VRwDQHoPerQ3VAQC0yaB367nqAADaZNC7836SrdURALTJoHdnfXUAAO0am5j482B1xBKwO8nph18YHx8rSgGgRU7o3Xi0OgCAtjmhD29PklVHXnRCB2CUnNCHd191AAA4oQ9na5LLJvvACR2AUXJCH8491QEAkBj0YTycZEt1BAAkbrnP10dJzp/uC265AzBKTujzc3t1AAAczqDP3Z1J3qmOAIDDGfS5eSJeIgPAAmTQZ29zkrXVEQAwGYM+OzuT3FIdAQBTMegz+z7JmiR7q0MAYCoGfXr7ktyYZEdxBwBMy6BP7ack1yd5rzoEAGZi0Cf3dZJrk2yrDgGA2TDo//dRkquTbK8OAYDZMuj/9WqSq5J8XtwBAHNi0P/1WJIbkvxcHQIAc7WsOmCBuC3J+uoIAJiv1k/o25NcEGMOwCLX8qA/ksGYe/gNgEWvxUH/LMl1Se6uDgGArrQ26PcnOSfJ69UhANClVgb9pSTnJrm3OgQA+rDUn3J/N8kDSV6pDgGAPi3VQf84g4feni7uAICRWGqD/m6SdUmeqQ4BgFFaKoO+McnjSV4r7gCAEot50L9N8lSSJ5PsKm4BgFKLcdBfSPJ8kherQwBgoVgMg/5HBk+pv5zBiP9SmwMAC89CHfRdSd5MsimDl8D8XpsDAAvbQhn0TzJ4Qn1rkreTfFmbAwCLy6gHfV8Gp+8dGbxT/eMkH8ZtdAAYyrIkFyc5I8lpSU5JsjLJCUlWJFme5Lgkxxz6eTL7k/yWwSjvz2C0f0yyN4Mn0fck+SrJF4euAwAd+wswtJlqxCMd8AAAAABJRU5ErkJggg==",") no-repeat"),display:"flex",justifyContent:"space-between",alignItems:"center","& .icon":{color:x.colorOne}}},title:{}}})),gr=function(e){var t=e.icon,a=e.title,r=e.subtitle,c=e.to,i=e.children,s=e.color,o=fr(e);return Object(C.jsxs)(D.a,{className:o.card,children:[Object(C.jsx)(_n.a,{to:c,children:Object(C.jsxs)("div",{className:o.main,children:[Object(C.jsx)(Sn.a,{width:"3em",className:"icon",children:Object(n.createElement)(t,{fontSize:"large"})}),Object(C.jsxs)(Sn.a,{textAlign:"right",children:[Object(C.jsx)(te.a,{className:o.title,color:"textSecondary",children:a}),Object(C.jsx)(te.a,{variant:"h5",component:"h2",style:{color:s||"#000"},children:r||"\u2000"})]})]})}),i&&Object(C.jsx)(wn.a,{}),i]})},yr=a(572),vr=a.n(yr),Ar=function(e){return Object(C.jsxs)(_e.a,Object(s.a)(Object(s.a)({},e),{},{children:[Object(C.jsx)(Pt.a,{alwaysOn:!0,choices:x.payments.map((function(e){return{id:e,name:e}})),source:"paid",label:"Amount Status",variant:"outlined"}),Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",alwaysOn:!0,variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Zt.a,{source:"purchase_invoice_id",variant:"outlined",fullWidth:!0,label:"Purchase Invoice#",alwaysOn:!0}),Object(C.jsx)(Pt.a,{choices:x.weeks.map((function(e){return{id:e.value,name:e.label}})),source:"weeks",label:"Week",variant:"outlined"}),Object(C.jsx)(Pt.a,{choices:x.filterAmounts.map((function(e){return{id:e.value,name:e.label}})),source:"amount",label:"Amount",variant:"outlined"}),Object(C.jsx)(Yt.a,{source:"date",label:"Date",variant:"outlined"})]}))},Sr=function(e){var t=e.data,a={flex:{display:"flex"},leftCol:{flex:1}},r=n.useState(0),c=Object(F.a)(r,2),i=c[0],s=c[1],o=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(x.api+"transactions?totalUnpaid=1").then((function(e){return s(e.data.toFixed(2))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return n.useEffect(o,[t]),Object(C.jsx)("div",{style:a.flex,children:Object(C.jsx)("div",{style:a.leftCol,children:Object(C.jsx)("div",{style:a.flex,children:Object(C.jsx)(gr,{to:"/orders",icon:function(){return Object(C.jsx)("h1",{style:{padding:0,margin:0,marginTop:-10},children:x.currencySymbol})},title:"Total Unpaid Amount(".concat(x.currencySymbol,")"),subtitle:i.toString()})})})})},wr=function(e){var t=e.record;return Object(C.jsx)(jt,{dispatchCrudDelete:!1,startUndoable:!1,resource:"transactions",record:t,undoable:!1})},_r=function(e){var t=n.useState([]),a=Object(F.a)(t,2),r=a[0],c=a[1],i=function(){var t=Object(j.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={filter:JSON.stringify(e.filterValues)},a="party_transactions_id=".concat(e.record.id,"&").concat(Object(g.stringify)(a)),n=x.api+"transactions?"+a,t.next=5,O.a.get(n).then((function(e){var t=e.data;return c(t)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n.useEffect(i,[]);var s=0;return 0==r.length?Object(C.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:Object(C.jsx)(sr.a,{})}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(ua.a,{size:"small",style:{borderRadius:"5px",overflow:"hidden"},children:[Object(C.jsx)(ba.a,{children:Object(C.jsx)(Oa.a,{children:Object(C.jsx)(Dr,{})})}),Object(C.jsx)(ba.a,{children:Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:"Party Name"}),Object(C.jsx)(xa.a,{children:"Date"}),Object(C.jsx)(xa.a,{children:"Amount Status"}),Object(C.jsx)(xa.a,{align:"right",children:"C.Purchase Invoice#"}),Object(C.jsx)(xa.a,{align:"right",children:"Purchase Invoice#"}),Object(C.jsxs)(xa.a,{align:"right",children:["Amount(",x.currencySymbol,")"]}),!e.allowPrint&&Object(C.jsx)(xa.a,{align:"center",children:"Action"})]})}),Object(C.jsxs)(ha.a,{children:[r.map((function(t,a){return s+=parseFloat(t.amount.replace(/,/g,"")),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{children:t.party_name}),Object(C.jsx)(xa.a,{children:t.date}),Object(C.jsx)(xa.a,{children:t.paid}),Object(C.jsx)(xa.a,{align:"right",children:t.custom_purchase_invoice_id?Object(C.jsx)(Ta.a,{to:"/purchase_invoices/".concat(t.custom_purchase_invoice_id,"/show"),target:"_blank",children:t.custom_purchase_invoice_id}):"--"}),Object(C.jsx)(xa.a,{align:"right",children:t.purchase_invoice_id||"--"}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{children:t.amount})}),Object(C.jsx)(xa.a,{children:Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[!e.allowPrint&&Object(C.jsx)(De.a,{record:t,basePath:"transactions"}),!e.allowPrint&&Object(C.jsx)(wr,{record:t})]})})]},a)})),Object(C.jsxs)(Oa.a,{children:[Object(C.jsx)(xa.a,{align:"right",colSpan:5,children:Object(C.jsx)("strong",{children:"Total"})}),Object(C.jsx)(xa.a,{align:"right",children:Object(C.jsx)("strong",{style:{marginRight:7},children:s.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})]})})},kr=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)(_r,Object(s.a)({},this.props))}}]),a}(n.Component),Pr=function(e){var t,a=n.useState(!1),r=Object(F.a)(a,2),c=r[0],i=r[1];return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{style:{marginRight:10},children:[Object(C.jsx)(Ot.a,{onAfterPrint:function(){return i(!1)},onBeforeGetContent:Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,x.sleep(1);case 3:case"end":return e.stop()}}),e)}))),trigger:function(){return Object(C.jsx)("div",{style:{marginTop:10,marginBottom:10,float:"right"},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},pageStyle:"padding:20px",content:function(){return t}}),Object(C.jsx)(kr,Object(s.a)({ref:function(e){return t=e},allowPrint:c},e))]})})},Cr=function(e){return Object(C.jsxs)(C.Fragment,{children:[e.print&&Object(C.jsx)(Dr,{}),Object(C.jsx)(Sr,Object(s.a)({},e)),Object(C.jsxs)(Pe.a,{rowClick:"expand",expand:Object(C.jsx)(Pr,Object(s.a)({},e)),children:[Object(C.jsx)(Ie.a,{source:"party_name",label:"Party",style:{fontWeight:"bold"}}),Object(C.jsx)(Ha.a,{source:"amount",label:"Total Amount(".concat(x.currencySymbol,")"),style:{fontWeight:"bold"}})]})]})},Ir=function(e){return Object(C.jsxs)(hr.a,{children:[Object(n.cloneElement)(e.filters,{context:"button"}),Object(C.jsx)(pr.a,{}),Object(C.jsx)(mr.a,{})]})},Tr=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsx)(Ne.a,Object(s.a)(Object(s.a)({filters:this.props.print?null:Object(C.jsx)(Ar,{}),pagination:this.props.print?null:Object(C.jsx)(mt,{}),actions:this.props.print?null:Object(C.jsx)(Ir,{})},this.props),{},{bulkActionButtons:!1,sort:{field:"date",order:"desc"},children:Object(C.jsx)(Cr,Object(s.a)(Object(s.a)({},this.props),{},{print:this.props.print}))}))}}]),a}(n.PureComponent),Fr=function(e){return Object(C.jsx)(Se.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(C.jsx)(we.a,Object(s.a)(Object(s.a)({},e),{},{label:"Update Transaction"}))}))},Dr=function(){var e={root:{margin:"auto",border:"none"},spacer:{height:20},invoices:{margin:"10px 0"},margin0:{margin:0},margin1:{margin:0,marginTop:5}};return Object(C.jsx)(D.a,{style:e.root,variant:"outlined",children:Object(C.jsx)(N.a,{children:Object(C.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(C.jsxs)("div",{children:[Object(C.jsx)("img",{src:xr,style:{width:100}}),Object(C.jsx)("h4",{style:e.margin0,children:"Everyday Fresh Food Ltd."}),Object(C.jsx)("p",{style:e.margin0,children:"Unit 25 Chalwyn Industrial Estate"}),Object(C.jsx)("p",{style:e.margin0,children:"Parkstone, Poole"}),Object(C.jsx)("p",{style:e.margin0,children:"BH12 4PE"})]})})})})},Nr=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.call(this)}return Object(ye.a)(a,[{key:"render",value:function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)(Dr,{}),Object(C.jsx)(Be.a,Object(s.a)(Object(s.a)({},this.props),{},{actions:!1,children:Object(C.jsxs)(Me.a,{children:[Object(C.jsx)(_t.a,{source:"party_id",reference:"parties",children:Object(C.jsx)(Ie.a,{source:"business_name"})}),Object(C.jsx)(Ie.a,{source:"amount",label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Ie.a,{source:"paid"}),Object(C.jsx)(Aa.a,{source:"date"})]})}))]})}}]),a}(n.PureComponent),Br=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{trigger:function(){return Object(C.jsx)("div",{style:{float:"right"},children:Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"})})},content:function(){return e.componentRef}}),Object(C.jsx)(Nr,Object(s.a)({ref:function(t){return e.componentRef=t}},this.props))]})}}]),a}(n.PureComponent),Mr=function(e){Object(ve.a)(a,e);var t=Object(Ae.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(ye.a)(a,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Ot.a,{onAfterPrint:function(){return e.props.setPrint(!1)},trigger:function(){return Object(C.jsxs)("div",{style:{marginTop:10,marginBottom:10,float:"right"},children:[Object(C.jsx)(B.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(ht.a,{fontSize:"inherit"}),children:"Print"}),Object(C.jsx)("br",{})]})},content:function(){return e.componentRef},onBeforeGetContent:Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.setPrint(!0),t.next=3,x.sleep(1);case 3:case"end":return t.stop()}}),t)}))),pageStyle:"padding:20px"}),Object(C.jsx)(Tr,Object(s.a)(Object(s.a)({ref:function(t){return e.componentRef=t}},this.props),{},{print:this.props.print,setPrint:this.props.setPrint}))]})}}]),a}(n.PureComponent),Rr={list:function(e){var t=n.useState(!1),a=Object(F.a)(t,2),r=a[0],c=a[1];return Object(C.jsx)(Mr,Object(s.a)(Object(s.a)({},e),{},{print:r,setPrint:c}))},name:"transactions",icon:vr.a,create:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(Ue.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(){t("Item added successfully."),n("/transactions"),a()},onFailure:function(e){t(e.body,"error")},children:Object(C.jsxs)(Ee.a,{children:[Object(C.jsx)(kt.a,{source:"party_id",reference:"parties",fullWidth:!0,validate:[Object(Le.b)()],variant:"outlined",perPage:1e7,filterToQuery:function(e){return{business_name:e}},children:Object(C.jsx)(qt.a,{optionText:"business_name"})}),Object(C.jsx)(Zt.a,{source:"amount",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Zt.a,{source:"custom_purchase_invoice_id",variant:"outlined",fullWidth:!0,label:"Custom Purchase Invoice#"}),Object(C.jsx)(Yt.a,{source:"date",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()]}),Object(C.jsx)(Qe.a,{source:"paid",label:"Amount Paid",choices:[{id:"paid",name:"Paid"},{id:"unpaid",name:"Unpaid"}]})]})}))},options:{label:"Party Transactions"},edit:function(e){var t=Object(E.a)(),a=Object(Re.a)(),n=Object(We.a)();return Object(C.jsx)(ze.a,Object(s.a)(Object(s.a)({},e),{},{onSuccess:function(e){n("/transactions"),a()},onFailure:function(e){t(e.body,"error"),a()},undoable:!1,children:Object(C.jsxs)(Ee.a,{toolbar:Object(C.jsx)(Fr,{}),children:[Object(C.jsx)(Zt.a,{source:"f_amount",variant:"outlined",fullWidth:!0,validate:[Object(Le.b)()],label:"Amount(".concat(x.currencySymbol,")")}),Object(C.jsx)(Zt.a,{source:"custom_purchase_invoice_id",variant:"outlined",fullWidth:!0,label:"Custom Purchase Invoice#"}),Object(C.jsx)(Qe.a,{source:"paid",label:"Amount Paid",choices:[{id:"Paid",name:"Paid"},{id:"Unpaid",name:"Unpaid"}]})]})}))},show:Br},Wr=a(1068),zr=Object(ae.a)((function(e){return{root:{marginTop:e.spacing(1)}}})),Er=function(e){var t=e.dense,a=void 0===t||t,r=Object(oe.a)().permissions,c=Object(n.useState)({orders:!1,products:!0,reportings:!1,payments:!1,invoices:!1,extras:!1}),i=Object(F.a)(c,2),o=i[0],l=i[1],j=zr(),d=function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(m.a)({},e,!t[e]))}))};return Object(C.jsxs)("div",{className:j.root,children:[Object(C.jsx)(K.a,{to:"/",primaryText:"Dashboard",leftIcon:Object(C.jsx)(Wr.a,{}),dense:a}),r===x.superAdminRole&&Object(C.jsx)(K.a,{to:"/parties",primaryText:"Parties",leftIcon:Object(C.jsx)(wt.icon,{}),dense:a}),Object(C.jsxs)(fe,{handleToggle:function(){return d("products")},isOpen:o.products,name:"Stocks",icon:Object(C.jsx)(Bt.icon,{}),dense:a,children:[Object(C.jsx)(K.a,{to:"/categories",primaryText:"Categories",leftIcon:Object(C.jsx)(Qt.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/items",primaryText:"Items",leftIcon:Object(C.jsx)(Bt.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/inventories",primaryText:"Inventories",leftIcon:Object(C.jsx)(Pa.icon,{}),dense:a})]}),Object(C.jsxs)(fe,{handleToggle:function(){return d("orders")},isOpen:o.orders,name:"Orders",icon:Object(C.jsx)(za.icon,{}),dense:a,children:[Object(C.jsx)(K.a,{to:"/orders",primaryText:"App Orders",leftIcon:Object(C.jsx)(za.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/manual_orders",primaryText:"Manual Orders",leftIcon:Object(C.jsx)(Za.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/purchase_orders",primaryText:"Purchase Orders",leftIcon:Object(C.jsx)(jn.icon,{}),dense:a}),r===x.superAdminRole&&Object(C.jsx)(K.a,{to:"/purchase_order_costing",primaryText:"Purchase Orders Costing",leftIcon:Object(C.jsx)(bn.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/purchase_items",primaryText:"Purchase Items",leftIcon:Object(C.jsx)(yn.icon,{}),dense:a})]}),Object(C.jsxs)(fe,{handleToggle:function(){return d("reportings")},isOpen:o.reportings,name:"Reportings",icon:Object(C.jsx)(Fn.icon,{}),dense:a,children:[r===x.superAdminRole&&Object(C.jsx)(K.a,{to:"/purchase_order_reports",primaryText:"Profit/Loss Reports",leftIcon:Object(C.jsx)(Rn.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"daily_invoice_reports",primaryText:"Daily Invoice Reportings",leftIcon:Object(C.jsx)(Zn.icon,{}),dense:a}),r===x.superAdminRole&&Object(C.jsx)(K.a,{to:"/order_reports",primaryText:"Order Reportings",leftIcon:Object(C.jsx)(Fn.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/van_reports",primaryText:"Van Reportings",leftIcon:Object(C.jsx)(Un.icon,{}),dense:a})]}),Object(C.jsxs)(fe,{handleToggle:function(){return d("invoices")},isOpen:o.invoices,name:"Invoices",icon:Object(C.jsx)(en.a,{}),dense:a,children:[Object(C.jsx)(K.a,{to:"/purchase_invoices",primaryText:"Purchase Invoices",leftIcon:Object(C.jsx)(Or.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/invoices",primaryText:"Order Invoices",leftIcon:Object(C.jsx)(ar.icon,{}),dense:a})]}),r===x.superAdminRole&&Object(C.jsx)(fe,{handleToggle:function(){return d("payments")},isOpen:o.payments,name:"Payments",icon:Object(C.jsx)(Rr.icon,{}),dense:a,children:Object(C.jsx)(K.a,{to:"/transactions",primaryText:"Party Transactions",leftIcon:Object(C.jsx)(Rr.icon,{}),dense:a})}),Object(C.jsxs)(fe,{handleToggle:function(){return d("extras")},isOpen:o.extras,name:"Expenses",icon:Object(C.jsx)($t.a,{}),dense:a,children:[Object(C.jsx)(K.a,{to:"/".concat(da.name),primaryText:"Expense Types",leftIcon:Object(C.jsx)(da.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/".concat(sa.name),primaryText:"Expenses",leftIcon:Object(C.jsx)(sa.icon,{}),dense:a}),Object(C.jsx)(K.a,{to:"/".concat(va.name),primaryText:"View Expenses",leftIcon:Object(C.jsx)(va.icon,{}),dense:a})]})]})},Lr=function(e){return Object(C.jsx)(H.a,Object(s.a)({},e))},Qr=function(e){var t={palette:{primary:{main:x.colorOne},secondary:{main:x.colorOne,light:x.colorTwo,dark:"#001064",contrastText:"#fff"},background:{default:"#fcfcfe"},type:"light"},shape:{borderRadius:8},overrides:{RaMenuItemLink:{root:{},active:{}},MuiPaper:{elevation1:{boxShadow:"none"},root:{border:"1px solid #e0e0e3",backgroundClip:"padding-box"}},MuiButton:{contained:{backgroundColor:"#fff",color:x.colorOne,boxShadow:"none"}},MuiButtonBase:{root:{"&:hover:active::after":{content:'""',display:"block",width:"100%",height:"100%",position:"absolute",top:0,right:0,backgroundColor:"currentColor",opacity:.3,borderRadius:"inherit"}}},MuiAppBar:{colorSecondary:{color:"#808080",backgroundColor:"#fff"}},MuiLinearProgress:{colorPrimary:{backgroundColor:"#f5f5f5"},barColorPrimary:{backgroundColor:"#d7d7d7"}},MuiDrawer:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)",marginRight:10,borderBottom:"10px solid ".concat(x.colorOne),paddingRight:10}},MuiFilledInput:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)","&$disabled":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}},MuiSnackbarContent:{root:{border:"none"}}},props:{MuiButtonBase:{}}};return Object(C.jsx)(X.a,Object(s.a)(Object(s.a)({},e),{},{appBar:se,sidebar:Lr,theme:t,menu:Er}))},Ur=a(153),Yr=a(612),qr=a(143),Gr=function(e){var t=e.value;return Object(C.jsx)(Pn,{to:"/orders",icon:function(){return Object(C.jsx)("h1",{style:{padding:0,margin:0,marginTop:-10},children:x.currencySymbol})},title:"Monthly Revenue",subtitle:t})},Jr=function(e){var t=e.value,a={filter:JSON.stringify({status:"Progress"})};return Object(C.jsx)(Pn,{to:"/orders?".concat(Object(g.stringify)(a)),icon:Ia.a,title:"New Orders",subtitle:t})},Zr=a(970),Vr=a(1069),Hr=a(1099),Xr=a(1070),Kr=a(577),$r=a.n(Kr),ec=a(147),tc=Object(ae.a)((function(e){return{link:{borderRadius:0},linkContent:{color:e.palette.primary.main}}})),ac=function(){var e=Object(pe.a)(),t=tc(),a=Object(qr.subDays)(new Date,30);a.setDate(a.getDate()-30),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var n=Object(ec.a)({type:"getList",resource:"parties",payload:{filter:{has_ordered:!0,first_seen_gte:a.toISOString()},sort:{field:"id",order:"DESC"},pagination:{page:1,perPage:10}}}),r=(n.loaded,n.data),c=r?r.reduce((function(e){return++e}),0):0;return Object(C.jsxs)(Pn,{to:"/parties",icon:$r.a,title:e("Parties"),subtitle:c,children:[Object(C.jsx)(Oe.a,{children:r?r.map((function(e){return Object(C.jsxs)(Zr.a,{button:!0,to:"/parties/".concat(e.id),component:_n.a,children:[Object(C.jsx)(Vr.a,{children:Object(C.jsx)(Hr.a,{src:"".concat(e.avatar)})}),Object(C.jsx)(Xr.a,{primary:"".concat(e.business_name)})]},e.id)})):null}),Object(C.jsx)(Sn.a,{flexGrow:"1",children:"\xa0"}),Object(C.jsx)(B.a,{className:t.link,component:_n.a,to:"/parties",size:"small",color:"primary",children:Object(C.jsx)(Sn.a,{p:1,className:t.linkContent,children:e("see all parties")})})]})},nc=a(1071),rc=a(1072),cc=Object(ae.a)((function(e){return{root:{flex:1},cost:{marginRight:"1em",color:e.palette.text.primary}}})),ic=function(e){var t=e.orders,a=void 0===t?[]:t,n=e.customers,r=void 0===n?{}:n,c=cc();return Object(C.jsxs)(D.a,{className:c.root,children:[Object(C.jsx)(nc.a,{title:"New Orders"}),Object(C.jsxs)(Oe.a,{children:[0==a.length?Object(C.jsx)(Zr.a,{children:Object(C.jsx)(Xr.a,{primary:"No new orders found."})}):null,a.map((function(e){return r[e.customer_id]&&(1==e.cart.length?"by ".concat("".concat(r[e.party_id].name," - ").concat(r[e.party_id].business_name)," , one item"):"by ".concat("".concat(r[e.party_id].name," - ").concat(r[e.party_id].business_name)," , ",e.cart.length," items")),Object(C.jsxs)(Zr.a,{button:!0,component:_n.a,to:"/orders/".concat(e.id),children:[Object(C.jsx)(Vr.a,{children:r[e.party_id]?Object(C.jsx)(Hr.a,{src:"".concat(r[e.party_id].avatar)}):Object(C.jsx)(Hr.a,{})}),Object(C.jsx)(Xr.a,{primary:e.created_at,secondary:r[e.party_id]?1==e.cart.length?"by ".concat("".concat(r[e.party_id].name," - ").concat(r[e.party_id].business_name)," , one item"):"by ".concat("".concat(r[e.party_id].name," - ").concat(r[e.party_id].business_name)," , ",e.cart.length," items"):""}),Object(C.jsx)(rc.a,{children:Object(C.jsxs)("span",{className:c.cost,children:[x.currencySymbol," ",e.total]})})]},e.id)}))]})]})},sc=a(1073),oc=a(1074),lc=a(592),jc=a(593),dc=a(1078),uc=a(235),bc=a(607),Oc=new Date,xc=Array.from({length:30},(function(e,t){return Object(qr.subDays)(Oc,t)})),hc=Object(qr.subDays)(new Date,30),pc=function(e){return new Date(e).toLocaleDateString()},mc=function(e){var t=function(e){return e.filter((function(e){return"Completed"==e.status})).reduce((function(e,t){var a=na()(t.created_at).format("YYYY-MM-DD");return e[a]||(e[a]=0),e[a]+=parseFloat(t.total),e}),{})}(e);return xc.map((function(e){return{date:e.getTime(),total:t[Object(qr.format)(e,"YYYY-MM-DD")]||0}}))},fc=function(e){var t=e.orders,a=Object(pe.a)();return t?Object(C.jsxs)(D.a,{children:[Object(C.jsx)(nc.a,{title:a("30 Day Revenue History")}),Object(C.jsx)(N.a,{children:Object(C.jsx)("div",{style:{width:"100%",height:"50vh"},children:Object(C.jsx)(sc.a,{children:Object(C.jsxs)(oc.a,{data:mc(t),children:[Object(C.jsx)("defs",{children:Object(C.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(C.jsx)("stop",{offset:"5%",stopColor:x.colorOne,stopOpacity:.8}),Object(C.jsx)("stop",{offset:"95%",stopColor:x.colorOne,stopOpacity:0})]})}),Object(C.jsx)(lc.a,{dataKey:"date",name:"Date",type:"number",scale:"time",domain:[Object(qr.addDays)(hc,1).getTime(),(new Date).getTime()],tickFormatter:pc}),Object(C.jsx)(jc.a,{dataKey:"total",name:"Revenue",unit:x.currencySymbol}),Object(C.jsx)(dc.a,{strokeDasharray:"3 3"}),Object(C.jsx)(uc.a,{cursor:{strokeDasharray:"3 3"},formatter:function(e){return new Intl.NumberFormat(void 0,{style:"currency",currency:x.currencyCode}).format(e)},labelFormatter:function(e){return pc(e)}}),Object(C.jsx)(bc.a,{type:"monotone",dataKey:"total",stroke:x.colorOne,strokeWidth:2,fill:"url(#colorUv)"})]})})})})]}):null},gc={flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},leftCol:{flex:1,marginRight:"0.5em"},rightCol:{flex:1,marginLeft:"0.5em"},singleCol:{marginTop:"1em",marginBottom:"1em"},topZeroMargin:{marginTop:"0em",marginBottom:"1em"}},yc=function(){return Object(C.jsx)("span",{style:{width:"1em"}})},vc=function(){return Object(C.jsx)("span",{style:{height:"1em"}})},Ac=function(){var e=Object(n.useState)({revenue:x.currencySymbol+"0.00",recentOrders:[],newOrders:"0"}),t=Object(F.a)(e,2),a=t[0],r=t[1],c=Object(Ur.a)(),i=Object(Vt.a)(),o=Object(Yr.a)((function(e){return e.breakpoints.down("xs")})),d=Object(Yr.a)((function(e){return e.breakpoints.down("md")})),u=Object(n.useCallback)(Object(j.a)(l.a.mark((function e(){var t,a,n,c,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(qr.subDays)(new Date,30),e.next=3,i.getList("all_orders",{filter:{date_gte:t.toISOString()},sort:{field:"created_at",order:"DESC"},pagination:{page:1,perPage:50}});case 3:return a=e.sent,n=a.data,c=n.reduce((function(e,t){return"Completed"==t.status&&(e.revenue+=parseFloat(t.total)),"Progress"===t.status&&(e.newOrders++,e.pendingOrders.push(t)),e}),{revenue:0,newOrders:0,pendingOrders:[]}),r((function(e){return Object(s.a)(Object(s.a)({},e),{},{recentOrders:n,newOrders:c.newOrders?c.newOrders:"0",revenue:c.revenue.toLocaleString(void 0,{style:"currency",currency:x.currencyCode,minimumFractionDigits:2,maximumFractionDigits:2}),pendingOrders:c.pendingOrders})})),e.next=9,i.getMany("parties",{ids:c.pendingOrders.map((function(e){return e.party_id}))});case 9:o=e.sent,j=o.data,r((function(e){return Object(s.a)(Object(s.a)({},e),{},{pendingOrdersCustomers:j.reduce((function(e,t){return e[t.id]=t,e}),{})})}));case 12:case"end":return e.stop()}}),e)}))),[i]);Object(n.useEffect)((function(){u()}),[c]);a.nbNewOrders,a.nbPendingReviews;var b=a.pendingOrders,O=a.pendingOrdersCustomers,h=(a.pendingReviews,a.pendingReviewsCustomers,a.revenue),p=a.recentOrders,m=a.newOrders;return o?Object(C.jsx)("div",{children:Object(C.jsxs)("div",{style:gc.flexColumn,children:[Object(C.jsx)(Gr,{value:h}),Object(C.jsx)(vc,{}),Object(C.jsx)(Jr,{value:m}),Object(C.jsx)(vc,{})]})}):d?Object(C.jsxs)("div",{style:gc.flexColumn,children:[Object(C.jsxs)("div",{style:gc.flex,children:[Object(C.jsx)(Gr,{value:h}),Object(C.jsx)(yc,{}),Object(C.jsx)(Jr,{value:m})]}),Object(C.jsx)("div",{style:gc.singleCol,children:Object(C.jsx)(fc,{orders:p})}),Object(C.jsx)("div",{style:gc.singleCol,children:Object(C.jsx)(ic,{orders:b,customers:O})})]}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{style:gc.flex,children:[Object(C.jsxs)("div",{style:gc.leftCol,children:[Object(C.jsxs)("div",{style:gc.flex,children:[Object(C.jsx)(Gr,{value:h}),Object(C.jsx)(yc,{}),Object(C.jsx)(Jr,{value:m})]}),Object(C.jsx)("div",{style:gc.singleCol,children:Object(C.jsx)(fc,{orders:p})}),Object(C.jsx)("div",{style:gc.singleCol})]}),Object(C.jsx)("div",{style:gc.rightCol,children:Object(C.jsx)("div",{style:gc.topZeroMargin,children:Object(C.jsx)(ac,{})})})]})})},Sc=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h2",{children:"Admin Panel - Dashboard"}),Object(C.jsx)(Ac,{})]})};function wc(){return n.useEffect((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null,e.prev=1,!(t=JSON.parse(localStorage.getItem("auth")))){e.next=8;break}return e.next=6,O.a.post(x.api+"validate",{token:t.token_id}).then((function(e){0==e.data&&localStorage.removeItem("auth")}));case 6:e.next=9;break;case 8:localStorage.removeItem("auth");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),localStorage.removeItem("auth");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(C.jsx)(d.a,{layout:Qr,dashboard:Sc,dataProvider:_,authProvider:p,loginPage:I,customRoutes:V,children:function(e){return[Object(C.jsx)(u.a,Object(s.a)({},Qt)),Object(C.jsx)(u.a,Object(s.a)({},sa)),Object(C.jsx)(u.a,Object(s.a)({},da)),Object(C.jsx)(u.a,Object(s.a)({},va)),Object(C.jsx)(u.a,Object(s.a)({},Bt)),Object(C.jsx)(u.a,Object(s.a)({},Pa)),Object(C.jsx)(u.a,Object(s.a)({},za)),Object(C.jsx)(u.a,Object(s.a)({},Za)),Object(C.jsx)(u.a,Object(s.a)({},jn)),Object(C.jsx)(u.a,Object(s.a)({},yn)),Object(C.jsx)(u.a,Object(s.a)({},ar)),Object(C.jsx)(u.a,Object(s.a)({},Or)),Object(C.jsx)(u.a,Object(s.a)({},Or)),Object(C.jsx)(u.a,Object(s.a)({},Zn)),e===x.superAdminRole?Object(C.jsx)(u.a,Object(s.a)({},wt)):null,e===x.superAdminRole?Object(C.jsx)(u.a,Object(s.a)({},bn)):null,e===x.superAdminRole?Object(C.jsx)(u.a,Object(s.a)({},Fn)):null,e===x.superAdminRole?Object(C.jsx)(u.a,Object(s.a)({},Rn)):null,e===x.superAdminRole?Object(C.jsx)(u.a,Object(s.a)({},Rr)):null,Object(C.jsx)(u.a,Object(s.a)({},Un))]}})}var _c,kc=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1104)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};_c=parseFloat,parseFloat=function(){return"string"===typeof arguments[0]&&(arguments[0]=arguments[0].replace(/,/g,"")),_c.apply(this,arguments)},i.a.render(Object(C.jsx)(wc,{}),document.getElementById("root")),kc()}},[[961,1,2]]]);
//# sourceMappingURL=main.9ad580c4.chunk.js.map